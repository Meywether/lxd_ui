webpackJsonp([2],{"/DPP":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("KSZ5"),r=i("UJAC"),a=!1;var s=function(e){a||i("BfPm")},o=i("VU/8")(n.a,r.a,!1,s,null,null);o.options.__file="pages/lxd/profiles.vue",t.default=o.exports},"0PNI":function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"",""])},"4KYn":function(e,t,i){var n=i("Gb/e");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("16a5c935",n,!1,{sourceMap:!1})},"7LB+":function(e,t,i){"use strict";var n=i("IdVE"),r=i("WBNX"),a=!1;var s=function(e){a||i("iAs+")},o=i("VU/8")(n.a,r.a,!1,s,null,null);o.options.__file="components/lxd/devices/infiniband.vue",t.a=o.exports},"9kgE":function(e,t,i){"use strict";var n=i("WE1y"),r=i("X0bX"),a=!1;var s=function(e){a||i("SYPG")},o=i("VU/8")(n.a,r.a,!1,s,null,null);o.options.__file="components/lxd/devices/usb.vue",t.a=o.exports},B28n:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"",""])},BfPm:function(e,t,i){var n=i("0PNI");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("55cd7064",n,!1,{sourceMap:!1})},C3xt:function(e,t,i){"use strict";var n=i("mvHQ"),r=i.n(n),a=i("Xxa5"),s=i.n(a),o=i("woOf"),c=i.n(o),d=i("exGp"),l=i.n(d),u=i("Dd8w"),m=i.n(u),v=i("NYxO"),p=i("mtWM"),h=i.n(p),f=i("Ee0Q");t.a={components:{},props:["linked"],computed:m()({},Object(v.mapGetters)({loggedUser:"auth/loggedUser",loggedToken:"auth/loggedToken"}),{tableHeaders:function(){return this.linked?[{text:"Name",value:"name"},{text:"Source",value:"source"},{text:"Path",value:"path"},{text:"Size",value:"size"},{text:"Actions",value:"name",sortable:!1,align:"center",width:"100px"}]:[{text:"Name",value:"name"},{text:"Source",value:"source"},{text:"Path",value:"path"},{text:"Size",value:"size"},{text:"Limits (Read/Write)",value:"limits"},{text:"Actions",value:"name",sortable:!1,align:"center",width:"100px"}]}}),data:function(){return{error:!1,attachError:!1,valid:!0,dialog:!1,tableLoading:!0,items:[],editingIndex:-1,editingItem:{id:-1,type:"disk",name:"",dict:{"limits.read":"","limits.write":"",path:"",source:"",readonly:!1,size:"",recursive:!1,pool:"None",propagation:"None"}},defaultItem:{id:-1,type:"disk",name:"",dict:{"limits.read":"","limits.write":"",path:"",source:"",readonly:!1,size:"",recursive:!1,pool:"None",propagation:"None"}},pools:[],linkedItem:{},nameRule:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=100||"Name must be less than 100 characters"}]}},beforeDestroy:function(){},mounted:function(){var e=l()(s.a.mark(function e(){var t,i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.a.defaults.headers.common.Authorization="Bearer "+this.loggedToken,this.$storage.isset("lxd")){e.next=15;break}return e.prev=2,e.next=5,h.a.get(this.loggedUser.sub+"/api/lxd");case 5:t=e.sent,this.$storage.set("lxd",t.data),this.lxd=t.data,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.$storage.remove("lxd");case 13:e.next=16;break;case 15:this.lxd=this.$storage.get("lxd");case 16:this.linkedItem=c()({},this.linked),this.$nextTick(function(){i.initialize()});case 18:case"end":return e.stop()}},e,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}(),watch:{dialog:function(e){e||this.close()},"editingItem.dict.pool":function(e){"None"!==e&&(this.editingItem.dict.source=e)}},methods:{initialize:function(){var e=l()(s.a.mark(function e(){var t,i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get(this.loggedUser.sub+"/api/lxd/devices/disk");case 3:t=e.sent,this.items=t.data.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.error="Could not fetch data from server.";case 10:return this.tableLoading=!1,e.prev=11,e.next=14,h.a.get(this.loggedUser.sub+"/api/lxd/storage",{params:{types:["name"]}});case 14:e.sent.data.data.forEach(function(e){i.pools.push(e.name)}),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(11),this.pools=[];case 21:case"end":return e.stop()}},e,this,[[0,7],[11,18]])}));return function(){return e.apply(this,arguments)}}(),attachItem:function(){var e=l()(s.a.mark(function e(t){var i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.linkedItem=c()({},f.outfix(this.linkedItem)),this.linkedItem.devices=c()({},this.linkedItem.devices),"None"===t.dict.propagation&&delete t.dict.propagation,"None"===t.dict.pool&&delete t.dict.pool,this.$set(this.linkedItem.devices,t.name,m()({type:t.type},t.dict)),this.$set(this.linkedItem.config,"raw.idmap","both 1000 1000\nboth 0 0"),e.next=8,h.a.patch(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{config:this.linkedItem.config,devices:this.linkedItem.devices});case 8:(i=e.sent).data.error&&(this.attachError=i.data.error);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),detachItem:function(){var e=l()(s.a.mark(function e(t){var i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.attachError=!1,this.$delete(this.linkedItem.devices,t.name),this.linkedItem=c()({},f.outfix(this.linkedItem)),delete this.linkedItem.config["raw.idmap"],e.next=6,h.a.put(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{config:this.linkedItem.config,devices:this.linkedItem.devices,ephemeral:this.linkedItem.ephemeral,stateful:this.linkedItem.stateful,profiles:this.linkedItem.profiles});case 6:(i=e.sent).data.error&&(this.attachError=i.data.error);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),editItem:function(e){this.editingIndex=this.items.indexOf(e),this.editingItem=JSON.parse(r()(e)),this.dialog=!0},saveItem:function(){var e=l()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$refs.form.validate()){e.next=17;break}if(e.prev=1,!(this.editingIndex>-1)){e.next=8;break}return e.next=5,h.a.put(this.loggedUser.sub+"/api/lxd/devices/disk/"+this.editingItem.id,this.editingItem);case 5:t=e.sent,e.next=11;break;case 8:return e.next=10,h.a.post(this.loggedUser.sub+"/api/lxd/devices/disk",this.editingItem);case 10:t=e.sent;case 11:t.data.error?(t.data.error.path&&(this.error=t.data.error.path),t.data.error.source&&(this.error=t.data.error.source)):(this.$emit("snackbar","Device successfully saved."),this.editingIndex>-1?c()(this.items[this.editingIndex],this.editingItem):this.items.push(c()({},this.editingItem)),-1===this.editingIndex&&this.close(),this.initialize()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),this.error="Could not save device to server.";case 17:case"end":return e.stop()}},e,this,[[1,14]])}));return function(){return e.apply(this,arguments)}}(),deleteItem:function(){var e=l()(s.a.mark(function e(t){var i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$prompt.show({persistent:!0,width:400,toolbar:{color:"red darken-3",closable:!1},title:"Delete device?",text:"Are you sure you want to delete the <b>"+t.name+'</b> device?<p class="text-md-center red--text"><br><b>Devices are not removed from containers!</b></p>',buttons:[{title:"Yes",color:"success",handler:function(){var e=l()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.items.indexOf(t),i.items.splice(n,1),e.prev=2,e.next=5,h.a.delete(i.loggedUser.sub+"/api/lxd/devices/disk/"+t.id);case 5:e.sent,i.$emit("snackbar","Device successfully deleted."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i.error="Failed to delete device.";case 12:case"end":return e.stop()}},e,i,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{title:"No",color:"error"}]});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),openDialog:function(){this.dialog=!0},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editingItem=c()({},e.defaultItem),e.editingIndex=-1},300)},ucfirst:function(e){return String(e).charAt(0).toUpperCase()+String(e).slice(1)}}}},Ee0Q:function(e,t){e.exports={empty:function(){return{architecture:"",config:{"image.architecture":"","image.description":"","image.os":"","image.release":"","image.serial":"","volatile.base_image":"","volatile.eth0.hwaddr":"","volatile.eth0.name":"","volatile.idmap.base":"","volatile.idmap.next":"","volatile.last_state.idmap":"","volatile.last_state.power":"","boot.autostart":!1,"security.privileged":!1,"security.nesting":!1,"limits.cpu":1,"limits.cpu.priority":5,"limits.processes":500,"limits.memory.swap.priority":5,"limits.disk.priority":5,"limits.network.priority":5,"limits.cpu.allowance":50,"limits.memory":1024,"limits.memory.swap":"0","limits.memory.enforce":"soft"},devices:{},ephemeral:!1,privileged:!1,profiles:["default"],stateful:!0,description:"",created_at:"",expanded_config:{},expanded_devices:{},name:"",status:"",status_code:0,last_used_at:"",state:{status:"",status_code:0,disk:{},memory:{usage:0,usage_peak:0,swap_usage:0,swap_usage_peak:0},network:{},pid:0,processes:0,cpu:{usage:0}},snapshots:[]}},infix:function(e){var t=this.empty(),i=t.config;return i["boot.autostart"]=e.config["boot.autostart"],i["security.privileged"]=e.config["security.privileged"],i["security.nesting"]=e.config["security.nesting"],i["limits.cpu"]=e.config["limits.cpu"]?Number(e.config["limits.cpu"]):t.config["limits.cpu"],i["limits.cpu.priority"]=e.config["limits.cpu.priority"]?Number(e.config["limits.cpu.priority"]):t.config["limits.cpu.priority"],i["limits.cpu.allowance"]=e.config["limits.cpu.allowance"]?Number(e.config["limits.cpu.allowance"].substring(0,e.config["limits.cpu.allowance"].indexOf("%"))):t.config["limits.cpu.allowance"],i["limits.processes"]=e.config["limits.processes"]?Number(e.config["limits.processes"]):t.config["limits.processes"],i["limits.disk.priority"]=e.config["limits.disk.priority"]?Number(e.config["limits.disk.priority"]):t.config["limits.disk.priority"],i["limits.network.priority"]=e.config["limits.network.priority"]?Number(e.config["limits.network.priority"]):t.config["limits.network.priority"],i["limits.memory"]=e.config["limits.memory"]?Number(e.config["limits.memory"].substring(0,e.config["limits.memory"].indexOf("MB"))):t.config["limits.memory"],i["limits.memory.swap"]=e.config["limits.memory.swap"]?e.config["limits.memory.swap"]:0,i["limits.memory.enforce"]="hard"===e.config["limits.memory.enforce"]?"hard":"soft",i["limits.memory.swap.priority"]=e.config["limits.memory.swap.priority"]?Number(e.config["limits.memory.swap.priority"]):t.config["limits.memory.swap.priority"],i["image.architecture"]=e.config["image.architecture"]||"",i["image.description"]=e.config["image.description"]||"",i["image.label"]=e.config["image.label"]||"",i["image.os"]=e.config["image.os"]||"",i["image.release"]=e.config["image.release"]||"",i["image.serial"]=e.config["image.serial"]||"",i["image.version"]=e.config["image.version"]||"",i["volatile.base_image"]=e.config["volatile.base_image"]||"",i["volatile.eth0.hwaddr"]=e.config["volatile.eth0.hwaddr"]||"",i["volatile.eth0.name"]=e.config["volatile.eth0.name"]||"",i["volatile.idmap.base"]=e.config["volatile.idmap.base"]||"",i["volatile.idmap.next"]=e.config["volatile.idmap.next"]||"",i["volatile.last_state.idmap"]=e.config["volatile.last_state.idmap"]||"",i["volatile.last_state.power"]=e.config["volatile.last_state.power"]||"",e.config=i,e},outfix:function(e){var t={"boot.autostart":e.config["boot.autostart"],"security.privileged":e.config["security.privileged"],"security.nesting":e.config["security.nesting"],"limits.cpu":String(e.config["limits.cpu"]),"limits.cpu.allowance":String(e.config["limits.cpu.allowance"])+"%","limits.cpu.priority":String(e.config["limits.cpu.priority"]),"limits.processes":String(e.config["limits.processes"]),"limits.memory":String(e.config["limits.memory"])+"MB","limits.memory.swap":String(e.config["limits.memory.swap"]),"limits.memory.swap.priority":String(e.config["limits.memory.swap.priority"]),"limits.memory.enforce":String(e.config["limits.memory.enforce"]),"limits.disk.priority":String(e.config["limits.disk.priority"]),"limits.network.priority":String(e.config["limits.network.priority"])};return t["limits.cpu.allowance"]=t["limits.cpu.allowance"].replace("%%","%"),t["limits.memory"]=t["limits.memory"].replace("MBMB","MB"),void 0!==e.config["raw.idmap"]&&(t["raw.idmap"]=e.config["raw.idmap"].trim()),e.config=t,void 0!==e.config["limits.memory.enforce"]&&null!==e.config["limits.memory.enforce"]||(e.config["limits.memory.enforce"]="soft"),void 0!==e.config["limits.memory.swap"]&&null!==e.config["limits.memory.swap"]||(e.config["limits.memory.swap"]="0"),e}}},Ga90:function(e,t,i){"use strict";var n=i("JCjA"),r=i("gwvS"),a=!1;var s=function(e){a||i("l7Xd")},o=i("VU/8")(n.a,r.a,!1,s,null,null);o.options.__file="components/lxd/devices/proxy.vue",t.a=o.exports},"Gb/e":function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"",""])},HqVJ:function(e,t,i){var n=i("waaV");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("1848ff6a",n,!1,{sourceMap:!1})},IdVE:function(e,t,i){"use strict";var n=i("mvHQ"),r=i.n(n),a=i("Xxa5"),s=i.n(a),o=i("woOf"),c=i.n(o),d=i("exGp"),l=i.n(d),u=i("Dd8w"),m=i.n(u),v=i("NYxO"),p=i("mtWM"),h=i.n(p),f=i("Ee0Q");t.a={components:{},props:["linked"],computed:m()({},Object(v.mapGetters)({loggedUser:"auth/loggedUser",loggedToken:"auth/loggedToken"}),{tableHeaders:function(){return this.linked?[{text:"Name",value:"name"},{text:"Nic Type",value:"nictype"},{text:"Device Name",value:"devname"},{text:"Parent",value:"parent"},{text:"Actions",value:"name",sortable:!1,align:"center",width:"100px"}]:[{text:"Name",value:"name"},{text:"Nic Type",value:"nictype"},{text:"Device Name",value:"devname"},{text:"Parent",value:"parent"},{text:"MAC Address",value:"hwaddr"},{text:"MTU",value:"mtu"},{text:"Actions",value:"name",sortable:!1,align:"center",width:"100px"}]}}),data:function(){return{error:!1,attachError:!1,valid:!0,dialog:!1,tableLoading:!0,items:[],networks:[],editingIndex:-1,editingItem:{id:-1,type:"infiniband",name:"",dict:{nictype:"physical",name:"",hwaddr:"",mtu:"",parent:""}},defaultItem:{id:-1,type:"infiniband",name:"",dict:{nictype:"physical",name:"",hwaddr:"",mtu:"",parent:""}},linkedItem:{},nameRule:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=100||"Name must be less than 100 characters"}],parentRule:[function(e){return!!e||"Parent device is required"}],mtuRule:[function(e){return!e||!isNaN(e)||"MTU must be numeric"}],macRule:[function(e){return!e||/^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/.test(e)||"Invalid MAC address"}]}},beforeDestroy:function(){},mounted:function(){var e=l()(s.a.mark(function e(){var t,i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.a.defaults.headers.common.Authorization="Bearer "+this.loggedToken,this.$storage.isset("lxd")){e.next=15;break}return e.prev=2,e.next=5,h.a.get(this.loggedUser.sub+"/api/lxd");case 5:t=e.sent,this.$storage.set("lxd",t.data),this.lxd=t.data,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.$storage.remove("lxd");case 13:e.next=16;break;case 15:this.lxd=this.$storage.get("lxd");case 16:this.linkedItem=c()({},this.linked),this.$nextTick(function(){i.initialize()});case 18:case"end":return e.stop()}},e,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}(),watch:{dialog:function(e){e||this.close()}},methods:{initialize:function(){var e=l()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get(this.loggedUser.sub+"/api/lxd/devices/infiniband");case 3:t=e.sent,this.items=t.data.data,this.linked||this.getNetworks(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.error="Could not fetch data from server.";case 11:this.tableLoading=!1;case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),getNetworks:function(){var e=l()(s.a.mark(function e(){var t,i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loggedUser||this.$router.replace("/servers"),e.next=4,h.a.get(this.loggedUser.sub+"/api/lxd/networks");case 4:t=e.sent,this.networks=[],t.data.data.forEach(function(e){e.managed&&i.networks.push(e.name)}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.networks=[];case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),attachItem:function(){var e=l()(s.a.mark(function e(t){var i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.linkedItem=c()({},f.outfix(this.linkedItem)),this.linkedItem.devices=c()({},this.linkedItem.devices),this.$set(this.linkedItem.devices,t.name,m()({type:t.type},t.dict)),e.next=5,h.a.patch(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{devices:this.linkedItem.devices});case 5:(i=e.sent).data.error&&(this.attachError=i.data.error);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),detachItem:function(){var e=l()(s.a.mark(function e(t){var i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.attachError=!1,this.$delete(this.linkedItem.devices,t.name),this.linkedItem=c()({},f.outfix(this.linkedItem)),e.next=5,h.a.put(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{config:this.linkedItem.config,devices:this.linkedItem.devices,ephemeral:this.linkedItem.ephemeral,stateful:this.linkedItem.stateful,profiles:this.linkedItem.profiles});case 5:(i=e.sent).data.error&&(this.attachError=i.data.error);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),editItem:function(e){this.editingIndex=this.items.indexOf(e),this.editingItem=JSON.parse(r()(e)),this.dialog=!0},saveItem:function(){var e=l()(s.a.mark(function e(){var t,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$refs.form.validate()){e.next=18;break}if(e.prev=1,t={id:this.editingItem.id,type:this.editingItem.type,name:this.editingItem.name,dict:{nictype:this.editingItem.dict.nictype,name:this.editingItem.dict.name,hwaddr:this.editingItem.dict.hwaddr,mtu:this.editingItem.dict.mtu,parent:this.editingItem.dict.parent}},!(this.editingIndex>-1)){e.next=9;break}return e.next=6,h.a.put(this.loggedUser.sub+"/api/lxd/devices/infiniband/"+this.editingItem.id,t);case 6:i=e.sent,e.next=12;break;case 9:return e.next=11,h.a.post(this.loggedUser.sub+"/api/lxd/devices/infiniband",t);case 11:i=e.sent;case 12:i.data.error?(i.data.error.parent&&(this.error=i.data.error.parent),i.data.error.nictype&&(this.error=i.data.error.nictype)):(this.$emit("snackbar","Device successfully saved."),-1===this.editingIndex&&this.close(),this.initialize()),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),this.error="Could not save device to server.";case 18:case"end":return e.stop()}},e,this,[[1,15]])}));return function(){return e.apply(this,arguments)}}(),deleteItem:function(){var e=l()(s.a.mark(function e(t){var i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$prompt.show({persistent:!0,width:400,toolbar:{color:"red darken-3",closable:!1},title:"Delete device?",text:"Are you sure you want to delete the <b>"+t.name+'</b> device?<p class="text-md-center red--text"><br><b>Devices are not removed from containers!</b></p>',buttons:[{title:"Yes",color:"success",handler:function(){var e=l()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.items.indexOf(t),i.items.splice(n,1),e.prev=2,e.next=5,h.a.delete(i.loggedUser.sub+"/api/lxd/devices/infiniband/"+t.id);case 5:e.sent,i.$emit("snackbar","Device successfully deleted."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i.error="Failed to delete device.";case 12:case"end":return e.stop()}},e,i,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{title:"No",color:"error"}]});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),openDialog:function(){this.dialog=!0},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editingItem=c()({},e.defaultItem),e.editingIndex=-1},300)},ucfirst:function(e){return String(e).charAt(0).toUpperCase()+String(e).slice(1)}}}},JCjA:function(e,t,i){"use strict";var n=i("mvHQ"),r=i.n(n),a=i("Xxa5"),s=i.n(a),o=i("woOf"),c=i.n(o),d=i("exGp"),l=i.n(d),u=i("Dd8w"),m=i.n(u),v=i("NYxO"),p=i("mtWM"),h=i.n(p),f=i("Ee0Q");t.a={components:{},props:["linked"],computed:m()({},Object(v.mapGetters)({loggedUser:"auth/loggedUser",loggedToken:"auth/loggedToken"}),{tableHeaders:function(){return this.linked,[{text:"Name",value:"name"},{text:"Listen",value:"listen"},{text:"Connect",value:"connect"},{text:"Bind",value:"bind"},{text:"Actions",value:"name",sortable:!1,align:"center",width:"100px"}]}}),data:function(){return{error:!1,attachError:!1,valid:!0,dialog:!1,tableLoading:!0,items:[],editingIndex:-1,editingItem:{id:-1,type:"proxy",name:"",dict:{listen:"",connect:"",bind:"host"}},defaultItem:{id:-1,type:"proxy",name:"",dict:{listen:"",connect:"",bind:"host"}},linkedItem:{},nameRule:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=100||"Name must be less than 100 characters"}],listenRule:[function(e){return!!e||"Listen address is required"},function(e){return e&&/^(?!0)(?!\.)((^|\.)([1-9]?\d|1\d\d|2(5[0-5]|[0-4]\d))){4}:\d+$/gm.test(e)||"Invalid IP address and port"}],connectRule:[function(e){return!!e||"Connect address is required"},function(e){return e&&/^(?!0)(?!\.)((^|\.)([1-9]?\d|1\d\d|2(5[0-5]|[0-4]\d))){4}:\d+$/gm.test(e)||"Invalid IP address and port"}]}},beforeDestroy:function(){},mounted:function(){var e=l()(s.a.mark(function e(){var t,i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.a.defaults.headers.common.Authorization="Bearer "+this.loggedToken,this.$storage.isset("lxd")){e.next=15;break}return e.prev=2,e.next=5,h.a.get(this.loggedUser.sub+"/api/lxd");case 5:t=e.sent,this.$storage.set("lxd",t.data),this.lxd=t.data,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.$storage.remove("lxd");case 13:e.next=16;break;case 15:this.lxd=this.$storage.get("lxd");case 16:this.linkedItem=c()({},this.linked),this.$nextTick(function(){i.initialize()});case 18:case"end":return e.stop()}},e,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}(),watch:{dialog:function(e){e||this.close()}},methods:{initialize:function(){var e=l()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get(this.loggedUser.sub+"/api/lxd/devices/proxy");case 3:t=e.sent,this.items=t.data.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.error="Could not fetch data from server.";case 10:this.tableLoading=!1;case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),attachItem:function(){var e=l()(s.a.mark(function e(t){var i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.linkedItem=c()({},f.outfix(this.linkedItem)),this.linkedItem.devices=c()({},this.linkedItem.devices),this.$set(this.linkedItem.devices,t.name,m()({type:t.type},t.dict)),e.next=5,h.a.patch(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{devices:this.linkedItem.devices});case 5:(i=e.sent).data.error&&(this.attachError=i.data.error);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),detachItem:function(){var e=l()(s.a.mark(function e(t){var i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.attachError=!1,this.$delete(this.linkedItem.devices,t.name),this.linkedItem=c()({},f.outfix(this.linkedItem)),e.next=5,h.a.put(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{config:this.linkedItem.config,devices:this.linkedItem.devices,ephemeral:this.linkedItem.ephemeral,stateful:this.linkedItem.stateful,profiles:this.linkedItem.profiles});case 5:(i=e.sent).data.error&&(this.attachError=i.data.error);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),editItem:function(e){this.editingIndex=this.items.indexOf(e),this.editingItem=JSON.parse(r()(e)),this.editingItem.dict.listen=this.editingItem.dict.listen.substring(this.editingItem.dict.listen.indexOf(":")+1),this.editingItem.dict.connect=this.editingItem.dict.connect.substring(this.editingItem.dict.connect.indexOf(":")+1),this.dialog=!0},saveItem:function(){var e=l()(s.a.mark(function e(){var t,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$refs.form.validate()){e.next=18;break}if(e.prev=1,t={id:this.editingItem.id,type:this.editingItem.type,name:this.editingItem.name,dict:{listen:"tcp:"+this.editingItem.dict.listen,connect:"tcp:"+this.editingItem.dict.connect,bind:this.editingItem.dict.bind}},!(this.editingIndex>-1)){e.next=9;break}return e.next=6,h.a.put(this.loggedUser.sub+"/api/lxd/devices/proxy/"+this.editingItem.id,t);case 6:i=e.sent,e.next=12;break;case 9:return e.next=11,h.a.post(this.loggedUser.sub+"/api/lxd/devices/proxy",t);case 11:i=e.sent;case 12:i.data.error?(i.data.error.listen&&(this.error=i.data.error.listen),i.data.error.connect&&(this.error=i.data.error.connect)):(this.$emit("snackbar","Device successfully saved."),-1===this.editingIndex&&this.close(),this.initialize()),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),this.error="Could not save device to server.";case 18:case"end":return e.stop()}},e,this,[[1,15]])}));return function(){return e.apply(this,arguments)}}(),deleteItem:function(){var e=l()(s.a.mark(function e(t){var i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$prompt.show({persistent:!0,width:400,toolbar:{color:"red darken-3",closable:!1},title:"Delete device?",text:"Are you sure you want to delete the <b>"+t.name+'</b> device?<p class="text-md-center red--text"><br><b>Devices are not removed from containers!</b></p>',buttons:[{title:"Yes",color:"success",handler:function(){var e=l()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.items.indexOf(t),i.items.splice(n,1),e.prev=2,e.next=5,h.a.delete(i.loggedUser.sub+"/api/lxd/devices/proxy/"+t.id);case 5:e.sent,i.$emit("snackbar","Device successfully deleted."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i.error="Failed to delete device.";case 12:case"end":return e.stop()}},e,i,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{title:"No",color:"error"}]});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),openDialog:function(){this.dialog=!0},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editingItem=c()({},e.defaultItem),e.editingIndex=-1},300)},ucfirst:function(e){return String(e).charAt(0).toUpperCase()+String(e).slice(1)}}}},KSZ5:function(e,t,i){"use strict";var n=i("mvHQ"),r=i.n(n),a=i("woOf"),s=i.n(a),o=i("Xxa5"),c=i.n(o),d=i("exGp"),l=i.n(d),u=i("Dd8w"),m=i.n(u),v=i("NYxO"),p=(i("4swq"),i("mtWM")),h=i.n(p),f=i("rO6o"),g=i("hBMt"),x=i("xNzE"),b=i("Ga90"),I=i("7LB+"),k=i("hr+4"),y=i("9kgE"),w=i("fH80"),_=i("XK8L"),$=i("e1fb");t.a={mixins:[f.a],middleware:["authenticated"],components:{nic:g.a,disk:x.a,proxy:b.a,infiniband:I.a,gpu:k.a,usb:y.a,unixchar:w.a,unixblock:_.a},computed:m()({},Object(v.mapGetters)({isAuthenticated:"auth/isAuthenticated",loggedUser:"auth/loggedUser",loggedToken:"auth/loggedToken"}),{empty_profile:function(){return $.empty()},max_memory:function(){return this.resources.memory.total/1e3/1e3},max_cpu:function(){return Number(this.resources.cpu.total)}}),data:function(){return{dialog:!1,valid:!0,error:"",snackbar:!1,snackbarColor:"green",snackbarText:"",snackbarTimeout:5e3,activeTab:"tab-configuration",activeDeviceTab:"nic",items:[],pools:[],networks:[],resources:{cpu:{total:0},memory:{total:0}},tableLoading:!0,tableHeaders:[{text:"Name",value:"name"},{text:"Description",value:"description"},{text:"Storage Pool",value:"pool"},{text:"Network",value:"network"},{text:"Actions",value:"id",sortable:!1,align:"right"}],editingIndex:-1,editingItem:$.empty(),defaultItem:$.empty(),nameRule:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=100||"Name must be less than 100 characters"}]}},beforeDestroy:function(){},mounted:function(){var e=l()(c.a.mark(function e(){var t,i=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.a.defaults.headers.common.Authorization="Bearer "+this.loggedToken,this.$storage.isset("lxd")){e.next=15;break}return e.prev=2,e.next=5,h.a.get(this.loggedUser.sub+"/api/lxd");case 5:t=e.sent,this.$storage.set("lxd",t.data),this.lxd=t.data,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.$storage.remove("lxd");case 13:e.next=16;break;case 15:this.lxd=this.$storage.get("lxd");case 16:this.$nextTick(function(){i.initialize(),i.getResources()});case 17:case"end":return e.stop()}},e,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}(),watch:{dialog:function(e){e||this.close()}},methods:{initialize:function(){var e=l()(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loggedUser||this.$router.replace("/servers"),e.next=4,h.a.get(this.loggedUser.sub+"/api/lxd/profiles");case 4:t=e.sent,this.items=t.data.data,e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),this.items=[],this.tableNoData="No data.",this.error="Could not fetch data from server.";case 13:this.tableLoading=!1;case 14:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),getResources:function(){var e=l()(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loggedUser||this.$router.replace("/servers"),e.next=4,h.a.get(this.loggedUser.sub+"/api/lxd/resources");case 4:t=e.sent,this.resources=t.data.data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.resources={};case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),getStoragePools:function(){var e=l()(c.a.mark(function e(){var t=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get(this.loggedUser.sub+"/api/lxd/storage",{params:{types:["name"]}});case 3:e.sent.data.data.forEach(function(e){t.pools.push(e.name)}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.pools=[];case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),getNetworks:function(){var e=l()(c.a.mark(function e(){var t=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get(this.loggedUser.sub+"/api/lxd/networks");case 3:e.sent.data.data.forEach(function(e){e.managed&&t.networks.push(e.name)}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.networks=[];case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),newItem:function(){this.dialog=!0},editItem:function(e){this.editingIndex=this.items.indexOf(e),this.editingItem=s()({},this.empty_profile,e);var t=!e.devices.eth0;this.editingItem.devices=s()({},this.empty_profile.devices,e.devices),t&&(this.editingItem.devices.eth0={nictype:"bridged",parent:"None",type:"nic"}),this.editingItem.config=s()({},this.empty_profile.config,e.config),this.editingItem=$.infix(this.editingItem),this.getStoragePools(),this.getNetworks(),this.dialog=!0},save:function(){var e=l()(c.a.mark(function e(){var t,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$refs.form.validate()){e.next=28;break}if(this.editingIndex>-1?s()(this.items[this.editingIndex],this.editingItem):this.items.push(s()({},this.editingItem)),e.prev=2,this.loggedUser||this.$router.replace("/servers"),this.editingItem=$.outfix(this.editingItem),t=JSON.parse(r()(this.editingItem)),i=!1,t.devices.eth0&&"None"!==t.devices.eth0.parent||(delete t.devices.eth0,i=!0),!(this.editingIndex>-1)){e.next=14;break}return e.next=11,h.a.post(this.loggedUser.sub+"/api/lxd/profiles/"+t.name,{config:t.config,description:t.description,devices:t.devices});case 11:e.sent,e.next=17;break;case 14:return e.next=16,h.a.post(this.loggedUser.sub+"/api/lxd/profiles",{config:t.config,description:t.description,devices:t.devices,name:t.name});case 16:e.sent;case 17:this.editingItem=$.infix(t),i&&(this.editingItem.devices.eth0={nictype:"bridged",parent:"None",type:"nic"}),this.snackbar=!0,this.snackbarText="Profile successfully saved.",e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),this.error="Could not save profile to server.";case 26:-1===this.editingIndex&&this.close(),this.initialize();case 28:case"end":return e.stop()}},e,this,[[2,23]])}));return function(){return e.apply(this,arguments)}}(),deleteItem:function(){var e=l()(c.a.mark(function e(t){var i=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$prompt.show({persistent:!0,width:400,toolbar:{color:"red darken-3",closable:!1},title:"Delete profile?",text:"Are you sure you want to delete the <b>"+t.name+"</b> profile?",buttons:[{title:"Yes",color:"success",handler:function(){var e=l()(c.a.mark(function e(){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.items.indexOf(t),i.items.splice(n,1),e.prev=2,e.next=5,h.a.delete(i.loggedUser.sub+"/api/lxd/profiles/"+t.name);case 5:e.sent,i.snackbar=!0,i.snackbarColor="green",i.snackbarText="Profile deleted.",e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),i.error="Failed to delete profile.";case 14:case"end":return e.stop()}},e,i,[[2,11]])}));return function(){return e.apply(this,arguments)}}()},{title:"No",color:"error"}]});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setSnackbar:function(e){this.snackbar=!0,this.snackbarTimeout=2500,this.snackbarText=e},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editingItem=s()({},e.defaultItem),e.editingIndex=-1,e.activeTab="tab-configuration",e.activeDeviceTab="nic",e.tabInit=!1},300)}}}},NDgE:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-alert",{attrs:{type:"error",value:e.attachError}},[e._v("\n    "+e._s(e.attachError)+"\n  ")]),i("v-data-table",{attrs:{headers:e.tableHeaders,items:e.items,"hide-actions":"",loading:e.tableLoading},scopedSlots:e._u([{key:"items",fn:function(t){return[i("tr",[i("td",[e.linkedItem.devices?i("span",[e._v(e._s(t.item.name))]):i("span",[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(i){i.stopPropagation(),e.editItem(t.item)}}},[e._v(e._s(t.item.name))])])]),i("td",[e._v(e._s(t.item.dict.source?t.item.dict.source:"-"))]),i("td",[e._v(e._s(t.item.dict.path?t.item.dict.path:"-"))]),i("td",[e._v(e._s(t.item.dict.size?t.item.dict.size:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s((t.item.dict["limits.read"]?t.item.dict["limits.read"]:"-")+"/"+(t.item.dict["limits.write"]?t.item.dict["limits.write"]:"-")))]),i("td",[e.linkedItem.devices?i("span",[e.linkedItem.devices[t.item.name]?e._e():i("v-btn",{attrs:{depressed:"",small:""},on:{click:function(i){e.attachItem(t.item)}}},[e._v("Attach")]),e.linkedItem.devices[t.item.name]?i("v-btn",{attrs:{dark:"",depressed:"",small:"",color:"red"},on:{click:function(i){e.detachItem(t.item)}}},[e._v("Detach")]):e._e()],1):i("v-tooltip",{attrs:{left:""}},[i("v-btn",{staticClass:"mx-0",staticStyle:{float:"right"},attrs:{slot:"activator",icon:""},on:{click:function(i){i.stopPropagation(),e.deleteItem(t.item)}},slot:"activator"},[i("v-icon",{attrs:{color:"pink"}},[e._v("delete")])],1),i("span",[e._v("Delete")])],1)],1)])]}}])},[i("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}),i("template",{slot:"no-data"},[e._v("\n      "+e._s(e.tableLoading?"Fetching data, please wait...":"There are currently no disk devices.")+"\n    ")])],2),i("v-dialog",{attrs:{"max-width":"700px",scrollable:"","hide-overlay":null!==e.linkedItem},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto","min-height":"calc(100vh - 400px)"},attrs:{flat:""}},[i("v-toolbar",{attrs:{card:"",dark:"",color:"light-blue darken-3"}},[i("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.close()}}},[i("v-icon",[e._v("close")])],1),i("v-toolbar-title",[e._v(e._s(-1===e.editingIndex?"New":"Edit")+" Disk Device")]),i("v-spacer"),i("v-toolbar-items",[i("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(t){e.saveItem()}}},[e._v("Save")])],1)],1),i("v-card-text",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-alert",{attrs:{type:"error",value:e.error}},[e._v("\n            "+e._s(e.error)+"\n          ")]),i("h3",[e._v("General")]),i("v-text-field",{attrs:{rules:e.nameRule,label:"Name:",placeholder:"",required:"",hint:"Enter a name for the disk device."},model:{value:e.editingItem.name,callback:function(t){e.$set(e.editingItem,"name",t)},expression:"editingItem.name"}}),i("v-text-field",{attrs:{label:"Path:",placeholder:"",required:"",hint:"Path inside the container where the disk will be mounted."},model:{value:e.editingItem.dict.path,callback:function(t){e.$set(e.editingItem.dict,"path",t)},expression:"editingItem.dict['path']"}}),i("v-text-field",{attrs:{label:"Source:",placeholder:"",required:"",hint:"Path on the host, either to a file/directory or to a block device."},model:{value:e.editingItem.dict.source,callback:function(t){e.$set(e.editingItem.dict,"source",t)},expression:"editingItem.dict['source']"}}),i("h3",[e._v("Limits")]),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"Read:",placeholder:"",hint:"I/O limit in byte/s (supports kB, MB, GB, TB, PB and EB suffixes) or in iops (must be suffixed with 'iops')."},model:{value:e.editingItem.dict["limits.read"],callback:function(t){e.$set(e.editingItem.dict,"limits.read",t)},expression:"editingItem.dict['limits.read']"}})],1),i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"Write:",placeholder:"",hint:"I/O limit in byte/s (supports kB, MB, GB, TB, PB and EB suffixes) or in iops (must be suffixed with 'iops')."},model:{value:e.editingItem.dict["limits.write"],callback:function(t){e.$set(e.editingItem.dict,"limits.write",t)},expression:"editingItem.dict['limits.write']"}})],1)],1),i("v-text-field",{attrs:{label:"Size:",placeholder:"",hint:"Disk size in bytes (supports kB, MB, GB, TB, PB and EB suffixes). This is only supported for the rootfs (/)."},model:{value:e.editingItem.dict.size,callback:function(t){e.$set(e.editingItem.dict,"size",t)},expression:"editingItem.dict['size']"}}),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs4:""}},[i("h4",[e._v("Optional")]),i("v-switch",{attrs:{color:"success","persistent-hint":"",hint:"Controls whether to fail if the source doesn't exist."},model:{value:e.editingItem.dict.optional,callback:function(t){e.$set(e.editingItem.dict,"optional",t)},expression:"editingItem.dict['optional']"}})],1),i("v-flex",{attrs:{xs4:""}},[i("h4",[e._v("Readonly")]),i("v-switch",{attrs:{color:"success","persistent-hint":"",hint:"Controls whether to make the mount read-only."},model:{value:e.editingItem.dict.readonly,callback:function(t){e.$set(e.editingItem.dict,"readonly",t)},expression:"editingItem.dict['readonly']"}})],1),i("v-flex",{attrs:{xs4:""}},[i("h4",[e._v("Recursive")]),i("v-switch",{attrs:{color:"success","persistent-hint":"",hint:"Whether or not to recursively mount the source path."},model:{value:e.editingItem.dict.recursive,callback:function(t){e.$set(e.editingItem.dict,"recursive",t)},expression:"editingItem.dict['recursive']"}})],1)],1),i("v-select",{attrs:{items:["None"].concat(e.pools),label:"Pool:","persistent-hint":"",hint:"Storage pool the disk device belongs to. This is only applicable for storage volumes managed by LXD."},model:{value:e.editingItem.dict.pool,callback:function(t){e.$set(e.editingItem.dict,"pool",t)},expression:"editingItem.dict.pool"}}),i("v-select",{attrs:{items:["None","private","shared","slave","unbindable","rshared","rslave","runbindable","rprivate"],label:"Propagation:","persistent-hint":"",hint:"Controls how a bind-mount is shared between the container and the host."},model:{value:e.editingItem.dict.propagation,callback:function(t){e.$set(e.editingItem.dict,"propagation",t)},expression:"editingItem.dict.propagation"}})],1)],1),i("div",{staticStyle:{flex:"1 1 auto"}})],1)],1)],1)};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},SYPG:function(e,t,i){var n=i("tM/K");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("55c302a7",n,!1,{sourceMap:!1})},UJAC:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-app",[i("v-snackbar",{attrs:{top:"",timeout:e.snackbarTimeout,color:e.snackbarColor},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.snackbarText)+"\n    "),i("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(t){e.snackbar=!1}}},[e._v("Close")])],1),i("v-content",[i("v-container",{attrs:{fluid:"",tag:"section",id:"grid"}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{"d-flex":"",xs12:"","order-xs5":""}},[i("v-layout",{attrs:{column:""}},[i("v-flex",{staticClass:"display mb-2",attrs:{tag:"h1"}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:""}},[e._v("\n                  LXD - Profiles\n                ")]),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-btn",{staticStyle:{float:"right"},attrs:{small:"",color:"success"},on:{click:function(t){e.newItem()}}},[e._v("New Profile")])],1)],1)],1),i("v-flex",[i("v-alert",{attrs:{type:"error",value:e.error}},[e._v("\n                "+e._s(e.error)+"\n              ")]),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.tableHeaders,items:e.items,"hide-actions":"",loading:e.tableLoading},scopedSlots:e._u([{key:"items",fn:function(t){return[i("tr",[i("td",[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(i){i.stopPropagation(),e.editItem(t.item)}}},[e._v(e._s(t.item.name))])]),i("td",[e._v(e._s(t.item.description))]),i("td",[e._v(e._s(t.item.devices.root&&t.item.devices.root.pool?t.item.devices.root.pool:"-"))]),i("td",[e._v(e._s(t.item.devices.eth0&&t.item.devices.eth0.parent?t.item.devices.eth0.parent:"-"))]),i("td",[i("v-btn",{staticClass:"mx-0",staticStyle:{float:"right"},attrs:{icon:""},on:{click:function(i){i.stopPropagation(),e.deleteItem(t.item)}}},[i("v-icon",{attrs:{color:"pink"}},[e._v("delete")])],1)],1)])]}}])},[i("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}),i("template",{slot:"no-data"},[e._v("\n                  "+e._s(e.tableLoading?"Fetching data, please wait...":"There are currently no profiles.")+"\n                ")])],2)],1)],1)],1)],1)],1),i("v-dialog",{attrs:{"max-width":"750px",scrollable:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{attrs:{tile:""}},[i("v-toolbar",{attrs:{card:"",dark:"",color:"light-blue darken-3"}},[i("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialog=!1}}},[i("v-icon",[e._v("close")])],1),i("v-toolbar-title",[e._v(e._s(-1===e.editingIndex?"New":"Edit")+" Profile")]),i("v-spacer"),i("v-toolbar-items",[i("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(t){e.save()}}},[e._v("Save")])],1)],1),i("v-card-text",{staticStyle:{padding:"0px"}},[i("v-tabs",{attrs:{"show-arrows":""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[i("v-tab",{attrs:{ripple:"",href:"#tab-configuration"}},[e._v("Configuration")]),i("v-tab",{attrs:{ripple:"",href:"#tab-devices"}},[e._v("Devices")]),i("v-tab-item",{attrs:{id:"tab-configuration"}},[i("v-card",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto",height:"calc(100vh - 215px)"},attrs:{flat:""}},[i("v-card-text",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("h2",[e._v("General")]),i("v-layout",{staticStyle:{"margin-top":"-20px"},attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:""}},[i("v-card-text",{staticClass:"px-1"},[i("v-text-field",{attrs:{rules:e.nameRule,label:"Name:",placeholder:"",required:"",hint:"Enter a name for the profile."},model:{value:e.editingItem.name,callback:function(t){e.$set(e.editingItem,"name",t)},expression:"editingItem.name"}}),i("v-text-field",{attrs:{label:"Description:",placeholder:"",hint:"Enter a description for the profile."},model:{value:e.editingItem.description,callback:function(t){e.$set(e.editingItem,"description",t)},expression:"editingItem.description"}}),i("v-select",{attrs:{items:e.pools,label:"Storage Pool:","persistent-hint":"",hint:"Storage pool the root disk device belongs to."},model:{value:e.editingItem.devices.root.pool,callback:function(t){e.$set(e.editingItem.devices.root,"pool",t)},expression:"editingItem.devices.root.pool"}})],1)],1),i("v-flex",{attrs:{xs6:""}},[i("v-card-text",{staticClass:"px-4"},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("h4",[e._v("Auto Start")]),i("v-switch",{attrs:{label:"1"===e.editingItem.config["boot.autostart"]?"Yes":"No","true-value":"1","false-value":"0",color:"success"},model:{value:e.editingItem.config["boot.autostart"],callback:function(t){e.$set(e.editingItem.config,"boot.autostart",t)},expression:"editingItem.config['boot.autostart']"}})],1)],1),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:""}},[i("h4",[e._v("Privileged")]),i("v-switch",{attrs:{label:"1"===e.editingItem.config["security.privileged"]?"Yes":"No","true-value":"1","false-value":"0",color:"success"},model:{value:e.editingItem.config["security.privileged"],callback:function(t){e.$set(e.editingItem.config,"security.privileged",t)},expression:"editingItem.config['security.privileged']"}})],1),i("v-flex",{attrs:{xs6:""}},[i("h4",[e._v("Nesting")]),i("v-switch",{attrs:{label:"1"===e.editingItem.config["security.nesting"]?"Yes":"No","true-value":"1","false-value":"0",color:"success"},model:{value:e.editingItem.config["security.nesting"],callback:function(t){e.$set(e.editingItem.config,"security.nesting",t)},expression:"editingItem.config['security.nesting']"}})],1)],1),e.editingItem.devices.eth0?i("v-select",{staticStyle:{"margin-top":"-6px"},attrs:{items:["None"].concat(e.networks),label:"Network:","persistent-hint":"",hint:"Network bridge for eth0."},model:{value:e.editingItem.devices.eth0.parent,callback:function(t){e.$set(e.editingItem.devices.eth0,"parent",t)},expression:"editingItem.devices.eth0.parent"}}):e._e()],1)],1)],1),i("h2",{staticStyle:{"margin-top":"-15px"}},[e._v("CPU")]),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:""}},[i("v-card-text",{staticClass:"px-1"},[i("h4",{staticStyle:{"margin-bottom":"-20px"}},[e._v("CPU Cores ("+e._s(e.editingItem.config["limits.cpu"])+")")]),i("v-slider",{attrs:{"thumb-label":"",max:e.max_cpu,ticks:""},model:{value:e.editingItem.config["limits.cpu"],callback:function(t){e.$set(e.editingItem.config,"limits.cpu",t)},expression:"editingItem.config['limits.cpu']"}}),i("h4",{staticStyle:{"margin-bottom":"-20px"}},[e._v("Max Processes ("+e._s(e.editingItem.config["limits.processes"])+")")]),i("v-slider",{attrs:{"thumb-label":"",max:"20000",step:"100",ticks:""},model:{value:e.editingItem.config["limits.processes"],callback:function(t){e.$set(e.editingItem.config,"limits.processes",t)},expression:"editingItem.config['limits.processes']"}})],1)],1),i("v-flex",{attrs:{xs6:""}},[i("v-card-text",{staticClass:"px-1"},[i("h4",{staticStyle:{"margin-bottom":"-20px"}},[e._v("CPU Allowance ("+e._s(e.editingItem.config["limits.cpu.allowance"])+"%)")]),i("v-slider",{attrs:{"thumb-label":"",max:"100",step:"1",ticks:""},model:{value:e.editingItem.config["limits.cpu.allowance"],callback:function(t){e.$set(e.editingItem.config,"limits.cpu.allowance",t)},expression:"editingItem.config['limits.cpu.allowance']"}}),i("h4",{staticStyle:{"margin-bottom":"-20px"}},[e._v("CPU Priority ("+e._s(e.editingItem.config["limits.cpu.priority"])+"/10)")]),i("v-slider",{attrs:{"thumb-label":"",max:"10",step:"1",ticks:""},model:{value:e.editingItem.config["limits.cpu.priority"],callback:function(t){e.$set(e.editingItem.config,"limits.cpu.priority",t)},expression:"editingItem.config['limits.cpu.priority']"}})],1)],1)],1),i("h2",{staticStyle:{"margin-top":"-15px"}},[e._v("Memory")]),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:""}},[i("v-card-text",{staticClass:"px-1"},[i("h4",{staticStyle:{"margin-bottom":"-20px"}},[e._v("Memory ("+e._s(e.editingItem.config["limits.memory"])+"MB)")]),i("v-slider",{attrs:{max:e.max_memory,"thumb-label":"",step:"64",ticks:""},model:{value:e.editingItem.config["limits.memory"],callback:function(t){e.$set(e.editingItem.config,"limits.memory",t)},expression:"editingItem.config['limits.memory']"}}),i("h4",{staticStyle:{"margin-bottom":"-20px"}},[e._v("Swap Priority ("+e._s(e.editingItem.config["limits.memory.swap.priority"])+"/10)")]),i("v-slider",{attrs:{"thumb-label":"",max:"10",step:"1",ticks:""},model:{value:e.editingItem.config["limits.memory.swap.priority"],callback:function(t){e.$set(e.editingItem.config,"limits.memory.swap.priority",t)},expression:"editingItem.config['limits.memory.swap.priority']"}})],1)],1),i("v-flex",{attrs:{xs6:""}},[i("v-card-text",{staticClass:"px-1"},[i("h4",[e._v("Enforce")]),i("v-switch",{attrs:{label:"hard"===e.editingItem.config["limits.memory.enforce"]?"Hard":"Soft","true-value":"hard","false-value":"soft",color:"success"},model:{value:e.editingItem.config["limits.memory.enforce"],callback:function(t){e.$set(e.editingItem.config,"limits.memory.enforce",t)},expression:"editingItem.config['limits.memory.enforce']"}}),i("h4",[e._v("Swap")]),i("v-switch",{attrs:{label:"1"===e.editingItem.config["limits.memory.swap"]?"Yes":"No","true-value":"1","false-value":"0",color:"success"},model:{value:e.editingItem.config["limits.memory.swap"],callback:function(t){e.$set(e.editingItem.config,"limits.memory.swap",t)},expression:"editingItem.config['limits.memory.swap']"}})],1)],1)],1),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:""}},[i("h2",[e._v("Disk")])]),i("v-flex",{attrs:{xs6:""}},[i("h2",[e._v("Network")])])],1),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:""}},[i("v-card-text",{staticClass:"px-1"},[i("h4",{staticStyle:{"margin-bottom":"-20px"}},[e._v("Priority ("+e._s(e.editingItem.config["limits.disk.priority"])+"/10)")]),i("v-slider",{attrs:{"thumb-label":"",max:"10",step:"1",ticks:""},model:{value:e.editingItem.config["limits.disk.priority"],callback:function(t){e.$set(e.editingItem.config,"limits.disk.priority",t)},expression:"editingItem.config['limits.disk.priority']"}})],1)],1),i("v-flex",{attrs:{xs6:""}},[i("v-card-text",{staticClass:"px-1"},[i("h4",{staticStyle:{"margin-bottom":"-20px"}},[e._v("Priority ("+e._s(e.editingItem.config["limits.network.priority"])+"/10)")]),i("v-slider",{attrs:{"thumb-label":"",max:"10",step:"1",ticks:""},model:{value:e.editingItem.config["limits.network.priority"],callback:function(t){e.$set(e.editingItem.config,"limits.network.priority",t)},expression:"editingItem.config['limits.network.priority']"}})],1)],1)],1)],1)],1)],1)],1),i("v-tab-item",{attrs:{id:"tab-devices"}},[i("v-card",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto",height:"calc(100vh - 215px)"},attrs:{flat:""}},[i("v-tabs",{attrs:{"show-arrows":""},model:{value:e.activeDeviceTab,callback:function(t){e.activeDeviceTab=t},expression:"activeDeviceTab"}},[i("v-tab",{attrs:{ripple:"",href:"#nic"}},[e._v("Nic")]),i("v-tab",{attrs:{ripple:"",href:"#disk"}},[e._v("Disk")]),i("v-tab",{attrs:{ripple:"",href:"#unixchar"}},[e._v("Unix-char")]),i("v-tab",{attrs:{ripple:"",href:"#unixblock"}},[e._v("Unix-block")]),i("v-tab",{attrs:{ripple:"",href:"#usb"}},[e._v("USB")]),i("v-tab",{attrs:{ripple:"",href:"#gpu"}},[e._v("GPU")]),i("v-tab",{attrs:{ripple:"",href:"#proxy"}},[e._v("Proxy")]),i("v-tab",{attrs:{ripple:"",href:"#infiniband"}},[e._v("InfiniBand")]),e.editingItem?i("v-tab-item",{attrs:{id:"nic"}},[i("nic",{ref:"nic",attrs:{linked:e.editingItem},on:{snackbar:e.setSnackbar}})],1):e._e(),e.editingItem?i("v-tab-item",{attrs:{id:"disk"}},[i("disk",{ref:"disk",attrs:{linked:e.editingItem},on:{snackbar:e.setSnackbar}})],1):e._e(),e.editingItem?i("v-tab-item",{attrs:{id:"unixchar"}},[i("unixchar",{ref:"unixchar",attrs:{linked:e.editingItem},on:{snackbar:e.setSnackbar}})],1):e._e(),e.editingItem?i("v-tab-item",{attrs:{id:"unixblock"}},[i("unixblock",{ref:"unixblock",attrs:{linked:e.editingItem},on:{snackbar:e.setSnackbar}})],1):e._e(),e.editingItem?i("v-tab-item",{attrs:{id:"usb"}},[i("usb",{ref:"usb",attrs:{linked:e.editingItem},on:{snackbar:e.setSnackbar}})],1):e._e(),e.editingItem?i("v-tab-item",{attrs:{id:"gpu"}},[i("gpu",{ref:"gpu",attrs:{linked:e.editingItem},on:{snackbar:e.setSnackbar}})],1):e._e(),e.editingItem?i("v-tab-item",{attrs:{id:"proxy"}},[i("proxy",{ref:"proxy",attrs:{linked:e.editingItem},on:{snackbar:e.setSnackbar}})],1):e._e(),e.editingItem?i("v-tab-item",{attrs:{id:"infiniband"}},[i("infiniband",{ref:"infiniband",attrs:{linked:e.editingItem},on:{snackbar:e.setSnackbar}})],1):e._e()],1)],1)],1)],1)],1),i("div",{staticStyle:{flex:"1 1 auto"}})],1)],1)],1)],1)};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},WBNX:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-alert",{attrs:{type:"error",value:e.attachError}},[e._v("\n    "+e._s(e.attachError)+"\n  ")]),i("v-data-table",{attrs:{headers:e.tableHeaders,items:e.items,"hide-actions":"",loading:e.tableLoading},scopedSlots:e._u([{key:"items",fn:function(t){return[i("tr",[i("td",[e.linkedItem.devices?i("span",[e._v(e._s(t.item.name))]):i("span",[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(i){i.stopPropagation(),e.editItem(t.item)}}},[e._v(e._s(t.item.name))])])]),i("td",[e._v(e._s(t.item.dict.nictype?e.ucfirst(t.item.dict.nictype):"-"))]),i("td",[e._v(e._s(t.item.dict.name?t.item.dict.name:"-"))]),i("td",[e._v(e._s(t.item.dict.parent?t.item.dict.parent:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.hwaddr?t.item.dict.hwaddr:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.mtu?t.item.dict.mtu:"-"))]),i("td",[e.linkedItem.devices?i("span",[e.linkedItem.devices[t.item.name]?e._e():i("v-btn",{attrs:{depressed:"",small:""},on:{click:function(i){e.attachItem(t.item)}}},[e._v("Attach")]),e.linkedItem.devices[t.item.name]?i("v-btn",{attrs:{dark:"",depressed:"",small:"",color:"red"},on:{click:function(i){e.detachItem(t.item)}}},[e._v("Detach")]):e._e()],1):i("v-tooltip",{attrs:{left:""}},[i("v-btn",{staticClass:"mx-0",staticStyle:{float:"right"},attrs:{slot:"activator",icon:""},on:{click:function(i){i.stopPropagation(),e.deleteItem(t.item)}},slot:"activator"},[i("v-icon",{attrs:{color:"pink"}},[e._v("delete")])],1),i("span",[e._v("Delete")])],1)],1)])]}}])},[i("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}),i("template",{slot:"no-data"},[e._v("\n      "+e._s(e.tableLoading?"Fetching data, please wait...":"There are currently no infiniband devices.")+"\n    ")])],2),i("v-dialog",{attrs:{"max-width":"700px",scrollable:"","hide-overlay":null!==e.linkedItem},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto","min-height":"calc(100vh - 400px)"},attrs:{flat:""}},[i("v-toolbar",{attrs:{card:"",dark:"",color:"light-blue darken-3"}},[i("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.close()}}},[i("v-icon",[e._v("close")])],1),i("v-toolbar-title",[e._v(e._s(-1===e.editingIndex?"New":"Edit")+" InfiniBand Device")]),i("v-spacer"),i("v-toolbar-items",[i("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(t){e.saveItem()}}},[e._v("Save")])],1)],1),i("v-card-text",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-alert",{attrs:{type:"error",value:e.error}},[e._v("\n            "+e._s(e.error)+"\n          ")]),i("h3",[e._v("General")]),i("v-text-field",{attrs:{rules:e.nameRule,label:"Name:",placeholder:"",required:"",hint:"Enter a name for the proxy device."},model:{value:e.editingItem.name,callback:function(t){e.$set(e.editingItem,"name",t)},expression:"editingItem.name"}}),i("h3",[e._v("Device Settings")]),i("v-select",{attrs:{items:["physical","sriov"],label:"Nic Type:","persistent-hint":"",hint:"Device type, one of physical or sriov."},model:{value:e.editingItem.dict.nictype,callback:function(t){e.$set(e.editingItem.dict,"nictype",t)},expression:"editingItem.dict.nictype"}}),i("v-select",{attrs:{items:e.networks,rules:e.parentRule,required:"",label:"Parent:"},model:{value:e.editingItem.dict.parent,callback:function(t){e.$set(e.editingItem.dict,"parent",t)},expression:"editingItem.dict.parent"}}),i("v-text-field",{attrs:{label:"Name:",placeholder:"",hint:"Name of the interface inside the container."},model:{value:e.editingItem.dict.name,callback:function(t){e.$set(e.editingItem.dict,"name",t)},expression:"editingItem.dict.name"}}),i("v-text-field",{attrs:{label:"MAC Address:",rules:e.macRule,placeholder:"",hint:"MAC address of the new interface."},model:{value:e.editingItem.dict.hwaddr,callback:function(t){e.$set(e.editingItem.dict,"hwaddr",t)},expression:"editingItem.dict.hwaddr"}}),i("v-text-field",{attrs:{label:"MTU:",rules:e.mtuRule,placeholder:"",hint:"The MTU of the new interface."},model:{value:e.editingItem.dict.mtu,callback:function(t){e.$set(e.editingItem.dict,"mtu",t)},expression:"editingItem.dict.mtu"}})],1)],1),i("div",{staticStyle:{flex:"1 1 auto"}})],1)],1)],1)};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},WE1y:function(e,t,i){"use strict";var n=i("mvHQ"),r=i.n(n),a=i("Xxa5"),s=i.n(a),o=i("woOf"),c=i.n(o),d=i("exGp"),l=i.n(d),u=i("Dd8w"),m=i.n(u),v=i("NYxO"),p=i("mtWM"),h=i.n(p),f=i("Ee0Q");t.a={components:{},props:["linked"],computed:m()({},Object(v.mapGetters)({loggedUser:"auth/loggedUser",loggedToken:"auth/loggedToken"}),{tableHeaders:function(){return this.linked?[{text:"Name",value:"name"},{text:"Vendor ID",value:"vendorid"},{text:"Product ID",value:"productid"},{text:"Required",value:"required"},{text:"Actions",value:"name",sortable:!1,align:"center",width:"100px"}]:[{text:"Name",value:"name"},{text:"Vendor ID",value:"vendorid"},{text:"Product ID",value:"productid"},{text:"Required",value:"required"},{text:"UID",value:"uid"},{text:"GUI",value:"gid"},{text:"Mode",value:"mode"},{text:"Actions",value:"name",sortable:!1,align:"center",width:"100px"}]}}),data:function(){return{error:!1,attachError:!1,valid:!0,dialog:!1,tableLoading:!0,items:[],editingIndex:-1,editingItem:{id:-1,type:"usb",name:"",dict:{vendorid:"",productid:"",uid:"0",gid:"0",mode:"0660",required:!1}},defaultItem:{id:-1,type:"usb",name:"",dict:{vendorid:"",productid:"",uid:"0",gid:"0",mode:"0660",required:!1}},linkedItem:{},nameRule:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=100||"Name must be less than 100 characters"}],vendorRule:[function(e){return!!e||"Vendor ID is required"},function(e){return e&&e.length<=4||"Vendor ID is 4 characters"}],productRule:[function(e){return!e||e.length<=4||"Product ID is 4 characters"}],uidRule:[function(e){return!e||!isNaN(e)||"UID must be numeric"}],gidRule:[function(e){return!e||!isNaN(e)||"GID must be numeric"}],modeRule:[function(e){return!e||!isNaN(e)||"Most must be numeric"}]}},beforeDestroy:function(){},mounted:function(){var e=l()(s.a.mark(function e(){var t,i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.a.defaults.headers.common.Authorization="Bearer "+this.loggedToken,this.$storage.isset("lxd")){e.next=15;break}return e.prev=2,e.next=5,h.a.get(this.loggedUser.sub+"/api/lxd");case 5:t=e.sent,this.$storage.set("lxd",t.data),this.lxd=t.data,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.$storage.remove("lxd");case 13:e.next=16;break;case 15:this.lxd=this.$storage.get("lxd");case 16:this.linkedItem=c()({},this.linked),this.$nextTick(function(){i.initialize()});case 18:case"end":return e.stop()}},e,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}(),watch:{dialog:function(e){e||this.close()}},methods:{initialize:function(){var e=l()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get(this.loggedUser.sub+"/api/lxd/devices/usb");case 3:t=e.sent,this.items=t.data.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.error="Could not fetch data from server.";case 10:this.tableLoading=!1;case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),attachItem:function(){var e=l()(s.a.mark(function e(t){var i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.linkedItem=c()({},f.outfix(this.linkedItem)),this.linkedItem.devices=c()({},this.linkedItem.devices),this.$set(this.linkedItem.devices,t.name,m()({type:t.type},t.dict)),e.next=5,h.a.patch(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{devices:this.linkedItem.devices});case 5:(i=e.sent).data.error&&(this.attachError=i.data.error);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),detachItem:function(){var e=l()(s.a.mark(function e(t){var i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.attachError=!1,this.$delete(this.linkedItem.devices,t.name),this.linkedItem=c()({},f.outfix(this.linkedItem)),e.next=5,h.a.put(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{config:this.linkedItem.config,devices:this.linkedItem.devices,ephemeral:this.linkedItem.ephemeral,stateful:this.linkedItem.stateful,profiles:this.linkedItem.profiles});case 5:(i=e.sent).data.error&&(this.attachError=i.data.error);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),editItem:function(e){this.editingIndex=this.items.indexOf(e),this.editingItem=JSON.parse(r()(e)),this.dialog=!0},saveItem:function(){var e=l()(s.a.mark(function e(){var t,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$refs.form.validate()){e.next=18;break}if(e.prev=1,t={id:this.editingItem.id,type:this.editingItem.type,name:this.editingItem.name,dict:{vendorid:this.editingItem.dict.vendorid,productid:this.editingItem.dict.productid,required:this.editingItem.dict.required,uid:this.editingItem.dict.uid,gid:this.editingItem.dict.gid,mode:this.editingItem.dict.mode}},!(this.editingIndex>-1)){e.next=9;break}return e.next=6,h.a.put(this.loggedUser.sub+"/api/lxd/devices/usb/"+this.editingItem.id,t);case 6:i=e.sent,e.next=12;break;case 9:return e.next=11,h.a.post(this.loggedUser.sub+"/api/lxd/devices/usb",t);case 11:i=e.sent;case 12:i.data.error?(i.data.error.name&&(this.error=i.data.error.name),i.data.error.dict.vendorid&&(this.error=i.data.error.dict.vendorid)):(this.$emit("snackbar","Device successfully saved."),-1===this.editingIndex&&this.close(),this.initialize()),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),this.error="Could not save device to server.";case 18:case"end":return e.stop()}},e,this,[[1,15]])}));return function(){return e.apply(this,arguments)}}(),deleteItem:function(){var e=l()(s.a.mark(function e(t){var i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$prompt.show({persistent:!0,width:400,toolbar:{color:"red darken-3",closable:!1},title:"Delete device?",text:"Are you sure you want to delete the <b>"+t.name+'</b> device?<p class="text-md-center red--text"><br><b>Devices are not removed from containers!</b></p>',buttons:[{title:"Yes",color:"success",handler:function(){var e=l()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.items.indexOf(t),i.items.splice(n,1),e.prev=2,e.next=5,h.a.delete(i.loggedUser.sub+"/api/lxd/devices/usb/"+t.id);case 5:e.sent,i.$emit("snackbar","Device successfully deleted."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i.error="Failed to delete device.";case 12:case"end":return e.stop()}},e,i,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{title:"No",color:"error"}]});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),openDialog:function(){this.dialog=!0},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editingItem=c()({},e.defaultItem),e.editingIndex=-1},300)},ucfirst:function(e){return String(e).charAt(0).toUpperCase()+String(e).slice(1)}}}},X0bX:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-alert",{attrs:{type:"error",value:e.attachError}},[e._v("\n    "+e._s(e.attachError)+"\n  ")]),i("v-data-table",{attrs:{headers:e.tableHeaders,items:e.items,"hide-actions":"",loading:e.tableLoading},scopedSlots:e._u([{key:"items",fn:function(t){return[i("tr",[i("td",[e.linkedItem.devices?i("span",[e._v(e._s(t.item.name))]):i("span",[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(i){i.stopPropagation(),e.editItem(t.item)}}},[e._v(e._s(t.item.name))])])]),i("td",[e._v(e._s(t.item.dict.vendorid?t.item.dict.vendorid:"-"))]),i("td",[e._v(e._s(t.item.dict.productid?t.item.dict.productid:"-"))]),i("td",[e._v(e._s(t.item.dict.required?"Yes":"No"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.uid?t.item.dict.uid:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.gid?t.item.dict.gid:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.mode?t.item.dict.mode:"-"))]),i("td",[e.linkedItem.devices?i("span",[e.linkedItem.devices[t.item.name]?e._e():i("v-btn",{attrs:{depressed:"",small:""},on:{click:function(i){e.attachItem(t.item)}}},[e._v("Attach")]),e.linkedItem.devices[t.item.name]?i("v-btn",{attrs:{dark:"",depressed:"",small:"",color:"red"},on:{click:function(i){e.detachItem(t.item)}}},[e._v("Detach")]):e._e()],1):i("v-tooltip",{attrs:{left:""}},[i("v-btn",{staticClass:"mx-0",staticStyle:{float:"right"},attrs:{slot:"activator",icon:""},on:{click:function(i){i.stopPropagation(),e.deleteItem(t.item)}},slot:"activator"},[i("v-icon",{attrs:{color:"pink"}},[e._v("delete")])],1),i("span",[e._v("Delete")])],1)],1)])]}}])},[i("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}),i("template",{slot:"no-data"},[e._v("\n      "+e._s(e.tableLoading?"Fetching data, please wait...":"There are currently no USB devices.")+"\n    ")])],2),i("v-dialog",{attrs:{"max-width":"700px",scrollable:"","hide-overlay":null!==e.linkedItem},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto","min-height":"calc(100vh - 400px)"},attrs:{flat:""}},[i("v-toolbar",{attrs:{card:"",dark:"",color:"light-blue darken-3"}},[i("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.close()}}},[i("v-icon",[e._v("close")])],1),i("v-toolbar-title",[e._v(e._s(-1===e.editingIndex?"New":"Edit")+" USB Device")]),i("v-spacer"),i("v-toolbar-items",[i("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(t){e.saveItem()}}},[e._v("Save")])],1)],1),i("v-card-text",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-alert",{attrs:{type:"error",value:e.error}},[e._v("\n            "+e._s(e.error)+"\n          ")]),i("h3",[e._v("General")]),i("v-text-field",{attrs:{rules:e.nameRule,label:"Name:",placeholder:"",required:"",hint:"Enter a name for the USB device."},model:{value:e.editingItem.name,callback:function(t){e.$set(e.editingItem,"name",t)},expression:"editingItem.name"}}),i("h3",[e._v("Device Settings")]),i("v-text-field",{attrs:{required:"",rules:e.vendorRule,label:"Vendor ID:",placeholder:"",hint:"The vendor id of the USB device."},model:{value:e.editingItem.dict.vendorid,callback:function(t){e.$set(e.editingItem.dict,"vendorid",t)},expression:"editingItem.dict.vendorid"}}),i("v-text-field",{attrs:{rules:e.productRule,label:"Product ID:",placeholder:"",hint:"The product id of the USB device."},model:{value:e.editingItem.dict.productid,callback:function(t){e.$set(e.editingItem.dict,"productid",t)},expression:"editingItem.dict.productid"}}),i("v-text-field",{attrs:{label:"UID:",rules:e.uidRule,placeholder:"",hint:"UID of the device owner in the container."},model:{value:e.editingItem.dict.uid,callback:function(t){e.$set(e.editingItem.dict,"uid",t)},expression:"editingItem.dict.uid"}}),i("v-text-field",{attrs:{label:"GID:",rules:e.gidRule,placeholder:"",hint:"GID of the device owner in the container."},model:{value:e.editingItem.dict.gid,callback:function(t){e.$set(e.editingItem.dict,"gid",t)},expression:"editingItem.dict.gid"}}),i("v-text-field",{attrs:{label:"Mode:",rules:e.modeRule,placeholder:"",hint:"Mode of the device in the container."},model:{value:e.editingItem.dict.mode,callback:function(t){e.$set(e.editingItem.dict,"mode",t)},expression:"editingItem.dict.mode"}}),i("h4",[e._v("Required")]),i("v-switch",{attrs:{color:"success","persistent-hint":"",hint:"Whether or not this device is required to start the container."},model:{value:e.editingItem.dict.required,callback:function(t){e.$set(e.editingItem.dict,"required",t)},expression:"editingItem.dict.required"}})],1)],1),i("div",{staticStyle:{flex:"1 1 auto"}})],1)],1)],1)};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},XK8L:function(e,t,i){"use strict";var n=i("cW4+"),r=i("jdHK"),a=!1;var s=function(e){a||i("HqVJ")},o=i("VU/8")(n.a,r.a,!1,s,null,null);o.options.__file="components/lxd/devices/unixblock.vue",t.a=o.exports},XTY1:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"",""])},Ylae:function(e,t,i){var n=i("B28n");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("33e4f0c7",n,!1,{sourceMap:!1})},ac7v:function(e,t,i){var n=i("XTY1");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("8fff1c6e",n,!1,{sourceMap:!1})},anQL:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-alert",{attrs:{type:"error",value:e.attachError}},[e._v("\n    "+e._s(e.attachError)+"\n  ")]),i("v-data-table",{attrs:{headers:e.tableHeaders,items:e.items,"hide-actions":"",loading:e.tableLoading},scopedSlots:e._u([{key:"items",fn:function(t){return[i("tr",[i("td",[e.linkedItem.devices?i("span",[e._v(e._s(t.item.name))]):i("span",[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(i){i.stopPropagation(),e.editItem(t.item)}}},[e._v(e._s(t.item.name))])])]),i("td",[e._v(e._s(t.item.dict.source?t.item.dict.source:"-"))]),i("td",[e._v(e._s(t.item.dict.path?t.item.dict.path:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.major?t.item.dict.major:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.minor?t.item.dict.minor:"-"))]),i("td",[e._v(e._s(t.item.dict.required?"Yes":"No"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.uid?t.item.dict.uid:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.gid?t.item.dict.gid:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.mode?t.item.dict.mode:"-"))]),i("td",[e.linkedItem.devices?i("span",[e.linkedItem.devices[t.item.name]?e._e():i("v-btn",{attrs:{depressed:"",small:""},on:{click:function(i){e.attachItem(t.item)}}},[e._v("Attach")]),e.linkedItem.devices[t.item.name]?i("v-btn",{attrs:{dark:"",depressed:"",small:"",color:"red"},on:{click:function(i){e.detachItem(t.item)}}},[e._v("Detach")]):e._e()],1):i("v-tooltip",{attrs:{left:""}},[i("v-btn",{staticClass:"mx-0",staticStyle:{float:"right"},attrs:{slot:"activator",icon:""},on:{click:function(i){i.stopPropagation(),e.deleteItem(t.item)}},slot:"activator"},[i("v-icon",{attrs:{color:"pink"}},[e._v("delete")])],1),i("span",[e._v("Delete")])],1)],1)])]}}])},[i("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}),i("template",{slot:"no-data"},[e._v("\n      "+e._s(e.tableLoading?"Fetching data, please wait...":"There are currently no unix character devices.")+"\n    ")])],2),i("v-dialog",{attrs:{"max-width":"700px",scrollable:"","hide-overlay":null!==e.linkedItem},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto","min-height":"calc(100vh - 400px)"},attrs:{flat:""}},[i("v-toolbar",{attrs:{card:"",dark:"",color:"light-blue darken-3"}},[i("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.close()}}},[i("v-icon",[e._v("close")])],1),i("v-toolbar-title",[e._v(e._s(-1===e.editingIndex?"New":"Edit")+" Unix Character Device")]),i("v-spacer"),i("v-toolbar-items",[i("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(t){e.saveItem()}}},[e._v("Save")])],1)],1),i("v-card-text",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-alert",{attrs:{type:"error",value:e.error}},[e._v("\n            "+e._s(e.error)+"\n          ")]),i("h3",[e._v("General")]),i("v-text-field",{attrs:{rules:e.nameRule,label:"Name:",placeholder:"",required:"",hint:"Enter a name for the character device."},model:{value:e.editingItem.name,callback:function(t){e.$set(e.editingItem,"name",t)},expression:"editingItem.name"}}),i("h3",[e._v("Device Settings")]),i("v-text-field",{attrs:{label:"Source:",placeholder:"",hint:"Path on the host. (one of 'source' and 'path' must be set)"},model:{value:e.editingItem.dict.source,callback:function(t){e.$set(e.editingItem.dict,"source",t)},expression:"editingItem.dict.source"}}),i("v-text-field",{attrs:{label:"Path:",placeholder:"",hint:"Path inside the container (one of 'source' and 'path' must be set)."},model:{value:e.editingItem.dict.path,callback:function(t){e.$set(e.editingItem.dict,"path",t)},expression:"editingItem.dict.path"}}),i("v-text-field",{attrs:{label:"Major Number:",placeholder:"",hint:"Device major number."},model:{value:e.editingItem.dict.major,callback:function(t){e.$set(e.editingItem.dict,"major",t)},expression:"editingItem.dict.major"}}),i("v-text-field",{attrs:{label:"Minor Number:",placeholder:"",hint:"Device minor number."},model:{value:e.editingItem.dict.minor,callback:function(t){e.$set(e.editingItem.dict,"minor",t)},expression:"editingItem.dict.minor"}}),i("v-text-field",{attrs:{label:"UID:",rules:e.uidRule,placeholder:"",hint:"UID of the device owner in the container."},model:{value:e.editingItem.dict.uid,callback:function(t){e.$set(e.editingItem.dict,"uid",t)},expression:"editingItem.dict.uid"}}),i("v-text-field",{attrs:{label:"GID:",rules:e.gidRule,placeholder:"",hint:"GID of the device owner in the container."},model:{value:e.editingItem.dict.gid,callback:function(t){e.$set(e.editingItem.dict,"gid",t)},expression:"editingItem.dict.gid"}}),i("v-text-field",{attrs:{label:"Mode:",rules:e.modeRule,placeholder:"",hint:"Mode of the device in the container."},model:{value:e.editingItem.dict.mode,callback:function(t){e.$set(e.editingItem.dict,"mode",t)},expression:"editingItem.dict.mode"}}),i("h4",[e._v("Required")]),i("v-switch",{attrs:{color:"success","persistent-hint":"",hint:"Whether or not this device is required to start the container."},model:{value:e.editingItem.dict.required,callback:function(t){e.$set(e.editingItem.dict,"required",t)},expression:"editingItem.dict.required"}})],1)],1),i("div",{staticStyle:{flex:"1 1 auto"}})],1)],1)],1)};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},bUSP:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-data-table",{attrs:{headers:e.tableHeaders,items:e.items,"hide-actions":"",loading:e.tableLoading},scopedSlots:e._u([{key:"items",fn:function(t){return[i("tr",[i("td",[e.linkedItem.devices?i("span",[e._v(e._s(t.item.dict.name))]):i("span",[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(i){i.stopPropagation(),e.editItem(t.item)}}},[e._v(e._s(t.item.dict.name))])])]),i("td",[e._v(e._s(e.ucfirst(t.item.dict.nictype)))]),i("td",[e._v(e._s(t.item.dict.parent))]),i("td",[e.linkedItem.devices?i("span",[e.linkedItem.devices[t.item.name]?e._e():i("v-btn",{attrs:{depressed:"",small:""},on:{click:function(i){e.attachItem(t.item)}}},[e._v("Attach")]),e.linkedItem.devices[t.item.name]?i("v-btn",{attrs:{dark:"",depressed:"",small:"",color:"red"},on:{click:function(i){e.detachItem(t.item)}}},[e._v("Detach")]):e._e()],1):i("v-tooltip",{attrs:{left:""}},[i("v-btn",{staticClass:"mx-0",staticStyle:{float:"right"},attrs:{slot:"activator",icon:""},on:{click:function(i){i.stopPropagation(),e.deleteItem(t.item)}},slot:"activator"},[i("v-icon",{attrs:{color:"pink"}},[e._v("delete")])],1),i("span",[e._v("Delete")])],1)],1)])]}}])},[i("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}),i("template",{slot:"no-data"},[e._v("\n      "+e._s(e.tableLoading?"Fetching data, please wait...":"There are currently no nic devices.")+"\n    ")])],2),i("v-dialog",{attrs:{"max-width":"700px",scrollable:"","hide-overlay":null!==e.linkedItem},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto","min-height":"calc(100vh - 400px)"},attrs:{flat:""}},[i("v-toolbar",{attrs:{card:"",dark:"",color:"light-blue darken-3"}},[i("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.close()}}},[i("v-icon",[e._v("close")])],1),i("v-toolbar-title",[e._v(e._s(-1===e.editingIndex?"New":"Edit")+" Nic Device")]),i("v-spacer"),i("v-toolbar-items",[i("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(t){e.saveItem()}}},[e._v("Save")])],1)],1),i("v-card-text",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-alert",{attrs:{type:"error",value:e.error}},[e._v("\n            "+e._s(e.error)+"\n          ")]),i("h3",[e._v("General")]),i("v-text-field",{attrs:{rules:e.nameRule,label:"Name:",placeholder:"",required:"",hint:"Enter a name for the nic device."},model:{value:e.editingItem.dict.name,callback:function(t){e.$set(e.editingItem.dict,"name",t)},expression:"editingItem.dict.name"}}),i("v-select",{attrs:{items:["bridged","macvlan","p2p","physical","sriov"],label:"NIC Type:"},model:{value:e.editingItem.dict.nictype,callback:function(t){e.$set(e.editingItem.dict,"nictype",t)},expression:"editingItem.dict.nictype"}}),["bridged","macvlan","p2p","sriov"].includes(e.editingItem.dict.nictype)?i("div",[i("v-select",{attrs:{items:e.networks,label:"Parent:"},model:{value:e.editingItem.dict.parent,callback:function(t){e.$set(e.editingItem.dict,"parent",t)},expression:"editingItem.dict.parent"}}),i("v-text-field",{attrs:{label:"Hostname:",placeholder:"",hint:"Hostname of the interface inside the host."},model:{value:e.editingItem.dict.host_name,callback:function(t){e.$set(e.editingItem.dict,"host_name",t)},expression:"editingItem.dict['host_name']"}})],1):e._e(),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"MAC address:",rules:e.macRule,placeholder:"",hint:"MAC address of the interface."},model:{value:e.editingItem.dict.hwaddr,callback:function(t){e.$set(e.editingItem.dict,"hwaddr",t)},expression:"editingItem.dict.hwaddr"}})],1),i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"MTU:",rules:e.mtuRule,placeholder:"",hint:"MTU of the interface."},model:{value:e.editingItem.dict.mtu,callback:function(t){e.$set(e.editingItem.dict,"mtu",t)},expression:"editingItem.dict.mtu"}})],1)],1),["bridged","p2p"].includes(e.editingItem.dict.nictype)?i("div",[i("h3",[e._v("Limits")]),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"Ingress:",placeholder:"",hint:"I/O limit in bit/s (supports kbit, Mbit, Gbit suffixes)."},model:{value:e.editingItem.dict["limits.ingress"],callback:function(t){e.$set(e.editingItem.dict,"limits.ingress",t)},expression:"editingItem.dict['limits.ingress']"}})],1),i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"Egress:",placeholder:"",hint:"I/O limit in bit/s (supports kbit, Mbit, Gbit suffixes)."},model:{value:e.editingItem.dict["limits.egress"],callback:function(t){e.$set(e.editingItem.dict,"limits.egress",t)},expression:"editingItem.dict['limits.egress']"}})],1)],1)],1):e._e(),["bridged"].includes(e.editingItem.dict.nictype)?i("div",[i("h3",[e._v("DHCP")]),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"IPv4 Address:",rules:e.ip4Rule,placeholder:"",hint:"An IPv4 address to assign to the container through DHCP."},model:{value:e.editingItem.dict["ipv4.address"],callback:function(t){e.$set(e.editingItem.dict,"ipv4.address",t)},expression:"editingItem.dict['ipv4.address']"}})],1),i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"IPv6 Address:",rules:e.ip6Rule,placeholder:"",hint:"An IPv6 address to assign to the container through DHCP."},model:{value:e.editingItem.dict["ipv6.address"],callback:function(t){e.$set(e.editingItem.dict,"ipv6.address",t)},expression:"editingItem.dict['ipv6.address']"}})],1)],1),i("h4",[e._v("MAC Filtering")]),i("v-switch",{attrs:{color:"success"},model:{value:e.editingItem.dict["security.mac_filtering"],callback:function(t){e.$set(e.editingItem.dict,"security.mac_filtering",t)},expression:"editingItem.dict['security.mac_filtering']"}})],1):e._e(),["macvlan","physical"].includes(e.editingItem.dict.nictype)?i("div",[i("h3",[e._v("VLAN")]),i("v-text-field",{attrs:{label:"VLAN:",placeholder:"",hint:"VLAN ID to attach to."},model:{value:e.editingItem.dict.vlan,callback:function(t){e.$set(e.editingItem.dict,"vlan",t)},expression:"editingItem.dict['vlan']"}})],1):e._e(),["bridged","macvlan","p2p","sriov"].includes(e.editingItem.dict.nictype)?i("div",[i("h3",[e._v("MAAS")]),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"MAAS IPv4:",rules:e.ip4Rule,placeholder:"",hint:"MAAS IPv4 subnet to register the container in."},model:{value:e.editingItem.dict["maas.subnet.ipv4"],callback:function(t){e.$set(e.editingItem.dict,"maas.subnet.ipv4",t)},expression:"editingItem.dict['maas.subnet.ipv4']"}})],1),i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"MAAS IPv6:",rules:e.ip6Rule,placeholder:"",hint:"MAAS IPv6 subnet to register the container in."},model:{value:e.editingItem.dict["maas.subnet.ipv6"],callback:function(t){e.$set(e.editingItem.dict,"maas.subnet.ipv6",t)},expression:"editingItem.dict['maas.subnet.ipv6']"}})],1)],1)],1):e._e()],1)],1),i("div",{staticStyle:{flex:"1 1 auto"}})],1)],1)],1)};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},"cW4+":function(e,t,i){"use strict";var n=i("mvHQ"),r=i.n(n),a=i("Xxa5"),s=i.n(a),o=i("woOf"),c=i.n(o),d=i("exGp"),l=i.n(d),u=i("Dd8w"),m=i.n(u),v=i("NYxO"),p=i("mtWM"),h=i.n(p),f=i("Ee0Q");t.a={components:{},props:["linked"],computed:m()({},Object(v.mapGetters)({loggedUser:"auth/loggedUser",loggedToken:"auth/loggedToken"}),{tableHeaders:function(){return this.linked?[{text:"Name",value:"name"},{text:"Source",value:"source"},{text:"Path",value:"path"},{text:"Required",value:"required"},{text:"Actions",value:"name",sortable:!1,align:"center",width:"100px"}]:[{text:"Name",value:"name"},{text:"Source",value:"source"},{text:"Path",value:"path"},{text:"Major",value:"major"},{text:"Minor",value:"minor"},{text:"Required",value:"required"},{text:"UID",value:"uid"},{text:"GUI",value:"gid"},{text:"Mode",value:"mode"},{text:"Actions",value:"name",sortable:!1,align:"center",width:"100px"}]}}),data:function(){return{error:!1,attachError:!1,valid:!0,dialog:!1,tableLoading:!0,items:[],editingIndex:-1,editingItem:{id:-1,type:"unixblock",name:"",dict:{source:"",path:"",major:"",minor:"",uid:"0",gid:"0",mode:"0660",required:!0}},defaultItem:{id:-1,type:"unixblock",name:"",dict:{source:"",path:"",major:"",minor:"",uid:"0",gid:"0",mode:"0660",required:!0}},linkedItem:{},nameRule:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=100||"Name must be less than 100 characters"}],uidRule:[function(e){return!e||!isNaN(e)||"UID must be numeric"}],gidRule:[function(e){return!e||!isNaN(e)||"GID must be numeric"}],modeRule:[function(e){return!e||!isNaN(e)||"Most must be numeric"}]}},beforeDestroy:function(){},mounted:function(){var e=l()(s.a.mark(function e(){var t,i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.a.defaults.headers.common.Authorization="Bearer "+this.loggedToken,this.$storage.isset("lxd")){e.next=15;break}return e.prev=2,e.next=5,h.a.get(this.loggedUser.sub+"/api/lxd");case 5:t=e.sent,this.$storage.set("lxd",t.data),this.lxd=t.data,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.$storage.remove("lxd");case 13:e.next=16;break;case 15:this.lxd=this.$storage.get("lxd");case 16:this.linkedItem=c()({},this.linked),this.$nextTick(function(){i.initialize()});case 18:case"end":return e.stop()}},e,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}(),watch:{dialog:function(e){e||this.close()}},methods:{initialize:function(){var e=l()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get(this.loggedUser.sub+"/api/lxd/devices/unixblock");case 3:t=e.sent,this.items=t.data.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.error="Could not fetch data from server.";case 10:this.tableLoading=!1;case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),attachItem:function(){var e=l()(s.a.mark(function e(t){var i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.linkedItem=c()({},f.outfix(this.linkedItem)),this.linkedItem.devices=c()({},this.linkedItem.devices),this.$set(this.linkedItem.devices,t.name,m()({type:t.type},t.dict)),e.next=5,h.a.patch(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{devices:this.linkedItem.devices});case 5:(i=e.sent).data.error&&(this.attachError=i.data.error);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),detachItem:function(){var e=l()(s.a.mark(function e(t){var i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.attachError=!1,this.$delete(this.linkedItem.devices,t.name),this.linkedItem=c()({},f.outfix(this.linkedItem)),e.next=5,h.a.put(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{config:this.linkedItem.config,devices:this.linkedItem.devices,ephemeral:this.linkedItem.ephemeral,stateful:this.linkedItem.stateful,profiles:this.linkedItem.profiles});case 5:(i=e.sent).data.error&&(this.attachError=i.data.error);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),editItem:function(e){this.editingIndex=this.items.indexOf(e),this.editingItem=JSON.parse(r()(e)),this.dialog=!0},saveItem:function(){var e=l()(s.a.mark(function e(){var t,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$refs.form.validate()){e.next=18;break}if(e.prev=1,t={id:this.editingItem.id,type:this.editingItem.type,name:this.editingItem.name,dict:{source:this.editingItem.dict.source,path:this.editingItem.dict.path,major:this.editingItem.dict.major,minor:this.editingItem.dict.minor,required:this.editingItem.dict.required,uid:this.editingItem.dict.uid,gid:this.editingItem.dict.gid,mode:this.editingItem.dict.mode}},!(this.editingIndex>-1)){e.next=9;break}return e.next=6,h.a.put(this.loggedUser.sub+"/api/lxd/devices/unixblock/"+this.editingItem.id,t);case 6:i=e.sent,e.next=12;break;case 9:return e.next=11,h.a.post(this.loggedUser.sub+"/api/lxd/devices/unixblock",t);case 11:i=e.sent;case 12:i.data.error?i.data.error.name&&(this.error=i.data.error.name):(this.$emit("snackbar","Device successfully saved."),-1===this.editingIndex&&this.close(),this.initialize()),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),this.error="Could not save device to server.";case 18:case"end":return e.stop()}},e,this,[[1,15]])}));return function(){return e.apply(this,arguments)}}(),deleteItem:function(){var e=l()(s.a.mark(function e(t){var i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$prompt.show({persistent:!0,width:400,toolbar:{color:"red darken-3",closable:!1},title:"Delete device?",text:"Are you sure you want to delete the <b>"+t.name+'</b> device?<p class="text-md-center red--text"><br><b>Devices are not removed from containers!</b></p>',buttons:[{title:"Yes",color:"success",handler:function(){var e=l()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.items.indexOf(t),i.items.splice(n,1),e.prev=2,e.next=5,h.a.delete(i.loggedUser.sub+"/api/lxd/devices/unixblock/"+t.id);case 5:e.sent,i.$emit("snackbar","Device successfully deleted."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i.error="Failed to delete device.";case 12:case"end":return e.stop()}},e,i,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{title:"No",color:"error"}]});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),openDialog:function(){this.dialog=!0},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editingItem=c()({},e.defaultItem),e.editingIndex=-1},300)},ucfirst:function(e){return String(e).charAt(0).toUpperCase()+String(e).slice(1)}}}},e1fb:function(e,t){e.exports={empty:function(){return{config:{"limits.cpu":1,"limits.processes":500,"limits.cpu.allowance":50,"limits.cpu.priority":5,"limits.memory":1024,"limits.memory.swap.priority":5,"limits.disk.priority":5,"limits.network.priority":5,"boot.autostart":"0","security.nesting":"0","security.privileged":"0","limits.memory.swap":"0","limits.memory.enforce":"soft"},description:"",devices:{eth0:{nictype:"bridged",parent:"lxdbr0",type:"nic"},root:{path:"/",pool:"default",type:"disk"}},name:"",used_by:[]}},infix:function(e){return void 0!==e.config["limits.memory"]&&isNaN(e.config["limits.memory"])&&(e.config["limits.memory"]=Number(e.config["limits.memory"].substring(0,e.config["limits.memory"].indexOf("MB")))),void 0!==e.config["limits.cpu.allowance"]&&isNaN(e.config["limits.cpu.allowance"])&&(e.config["limits.cpu.allowance"]=Number(e.config["limits.cpu.allowance"].substring(0,e.config["limits.cpu.allowance"].indexOf("%")))),e.config["limits.cpu"]=Number(e.config["limits.cpu"]),e.config["limits.cpu.priority"]=Number(e.config["limits.cpu.priority"]),e.config["limits.processes"]=Number(e.config["limits.processes"]),e.config["limits.memory.swap.priority"]=Number(e.config["limits.memory.swap.priority"]),e.config["limits.disk.priority"]=Number(e.config["limits.disk.priority"]),e.config["limits.network.priority"]=Number(e.config["limits.network.priority"]),e},outfix:function(e){return e.config["limits.cpu"]=String(e.config["limits.cpu"]),e.config["limits.processes"]=String(e.config["limits.processes"]),e.config["limits.cpu.allowance"]=String(e.config["limits.cpu.allowance"])+"%",e.config["limits.cpu.priority"]=String(e.config["limits.cpu.priority"]),e.config["limits.memory"]=String(e.config["limits.memory"])+"MB",e.config["limits.memory.swap.priority"]=String(e.config["limits.memory.swap.priority"]),e.config["limits.disk.priority"]=String(e.config["limits.disk.priority"]),e.config["limits.network.priority"]=String(e.config["limits.network.priority"]),e.config["limits.memory.swap"]=String(e.config["limits.memory.swap"]),e.config["limits.memory.enforce"]=String(e.config["limits.memory.enforce"]),e}}},fH80:function(e,t,i){"use strict";var n=i("gM98"),r=i("anQL"),a=!1;var s=function(e){a||i("ac7v")},o=i("VU/8")(n.a,r.a,!1,s,null,null);o.options.__file="components/lxd/devices/unixchar.vue",t.a=o.exports},fv6p:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-alert",{attrs:{type:"error",value:e.attachError}},[e._v("\n    "+e._s(e.attachError)+"\n  ")]),i("v-data-table",{attrs:{headers:e.tableHeaders,items:e.items,"hide-actions":"",loading:e.tableLoading},scopedSlots:e._u([{key:"items",fn:function(t){return[i("tr",[i("td",[e.linkedItem.devices?i("span",[e._v(e._s(t.item.name))]):i("span",[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(i){i.stopPropagation(),e.editItem(t.item)}}},[e._v(e._s(t.item.name))])])]),i("td",[e._v(e._s(t.item.dict.vendorid?t.item.dict.vendorid:"-"))]),i("td",[e._v(e._s(t.item.dict.productid?t.item.dict.productid:"-"))]),i("td",[e._v(e._s(t.item.dict.id?t.item.dict.id:"-"))]),i("td",[e._v(e._s(t.item.dict.pci?t.item.dict.pci:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.uid?t.item.dict.uid:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.gid?t.item.dict.gid:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.mode?t.item.dict.mode:"-"))]),i("td",[e.linkedItem.devices?i("span",[e.linkedItem.devices[t.item.name]?e._e():i("v-btn",{attrs:{depressed:"",small:""},on:{click:function(i){e.attachItem(t.item)}}},[e._v("Attach")]),e.linkedItem.devices[t.item.name]?i("v-btn",{attrs:{dark:"",depressed:"",small:"",color:"red"},on:{click:function(i){e.detachItem(t.item)}}},[e._v("Detach")]):e._e()],1):i("v-tooltip",{attrs:{left:""}},[i("v-btn",{staticClass:"mx-0",staticStyle:{float:"right"},attrs:{slot:"activator",icon:""},on:{click:function(i){i.stopPropagation(),e.deleteItem(t.item)}},slot:"activator"},[i("v-icon",{attrs:{color:"pink"}},[e._v("delete")])],1),i("span",[e._v("Delete")])],1)],1)])]}}])},[i("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}),i("template",{slot:"no-data"},[e._v("\n      "+e._s(e.tableLoading?"Fetching data, please wait...":"There are currently no GPU devices.")+"\n    ")])],2),i("v-dialog",{attrs:{"max-width":"700px",scrollable:"","hide-overlay":null!==e.linkedItem},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto","min-height":"calc(100vh - 400px)"},attrs:{flat:""}},[i("v-toolbar",{attrs:{card:"",dark:"",color:"light-blue darken-3"}},[i("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.close()}}},[i("v-icon",[e._v("close")])],1),i("v-toolbar-title",[e._v(e._s(-1===e.editingIndex?"New":"Edit")+" GPU Device")]),i("v-spacer"),i("v-toolbar-items",[i("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(t){e.saveItem()}}},[e._v("Save")])],1)],1),i("v-card-text",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-alert",{attrs:{type:"error",value:e.error}},[e._v("\n            "+e._s(e.error)+"\n          ")]),i("h3",[e._v("General")]),i("v-text-field",{attrs:{rules:e.nameRule,label:"Name:",placeholder:"",required:"",hint:"Enter a name for the GPU device."},model:{value:e.editingItem.name,callback:function(t){e.$set(e.editingItem,"name",t)},expression:"editingItem.name"}}),i("h3",[e._v("Device Settings")]),i("v-text-field",{attrs:{label:"Vendor ID:",placeholder:"",hint:"The vendor id of the GPU device."},model:{value:e.editingItem.dict.vendorid,callback:function(t){e.$set(e.editingItem.dict,"vendorid",t)},expression:"editingItem.dict.vendorid"}}),i("v-text-field",{attrs:{label:"Product ID:",placeholder:"",hint:"The product id of the GPU device."},model:{value:e.editingItem.dict.productid,callback:function(t){e.$set(e.editingItem.dict,"productid",t)},expression:"editingItem.dict.productid"}}),i("v-text-field",{attrs:{label:"Card ID:",placeholder:"",hint:"The card id of the GPU device."},model:{value:e.editingItem.dict.id,callback:function(t){e.$set(e.editingItem.dict,"id",t)},expression:"editingItem.dict.id"}}),i("v-text-field",{attrs:{label:"PCI:",placeholder:"",hint:"The PCI address of the GPU device."},model:{value:e.editingItem.dict.pci,callback:function(t){e.$set(e.editingItem.dict,"pci",t)},expression:"editingItem.dict.pci"}}),i("v-text-field",{attrs:{label:"UID:",rules:e.uidRule,placeholder:"",hint:"UID of the device owner in the container."},model:{value:e.editingItem.dict.uid,callback:function(t){e.$set(e.editingItem.dict,"uid",t)},expression:"editingItem.dict.uid"}}),i("v-text-field",{attrs:{label:"GID:",rules:e.gidRule,placeholder:"",hint:"GID of the device owner in the container."},model:{value:e.editingItem.dict.gid,callback:function(t){e.$set(e.editingItem.dict,"gid",t)},expression:"editingItem.dict.gid"}}),i("v-text-field",{attrs:{label:"Mode:",rules:e.modeRule,placeholder:"",hint:"Mode of the device in the container."},model:{value:e.editingItem.dict.mode,callback:function(t){e.$set(e.editingItem.dict,"mode",t)},expression:"editingItem.dict.mode"}})],1)],1),i("div",{staticStyle:{flex:"1 1 auto"}})],1)],1)],1)};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},fy18:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"",""])},gM98:function(e,t,i){"use strict";var n=i("mvHQ"),r=i.n(n),a=i("Xxa5"),s=i.n(a),o=i("woOf"),c=i.n(o),d=i("exGp"),l=i.n(d),u=i("Dd8w"),m=i.n(u),v=i("NYxO"),p=i("mtWM"),h=i.n(p),f=i("Ee0Q");t.a={components:{},props:["linked"],computed:m()({},Object(v.mapGetters)({loggedUser:"auth/loggedUser",loggedToken:"auth/loggedToken"}),{tableHeaders:function(){return this.linked?[{text:"Name",value:"name"},{text:"Source",value:"source"},{text:"Path",value:"path"},{text:"Required",value:"required"},{text:"Actions",value:"name",sortable:!1,align:"center",width:"100px"}]:[{text:"Name",value:"name"},{text:"Source",value:"source"},{text:"Path",value:"path"},{text:"Major",value:"major"},{text:"Minor",value:"minor"},{text:"Required",value:"required"},{text:"UID",value:"uid"},{text:"GUI",value:"gid"},{text:"Mode",value:"mode"},{text:"Actions",value:"name",sortable:!1,align:"center",width:"100px"}]}}),data:function(){return{error:!1,attachError:!1,valid:!0,dialog:!1,tableLoading:!0,items:[],editingIndex:-1,editingItem:{id:-1,type:"unixchar",name:"",dict:{source:"",path:"",major:"",minor:"",uid:"0",gid:"0",mode:"0660",required:!0}},defaultItem:{id:-1,type:"unixchar",name:"",dict:{source:"",path:"",major:"",minor:"",uid:"0",gid:"0",mode:"0660",required:!0}},linkedItem:{},nameRule:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=100||"Name must be less than 100 characters"}],uidRule:[function(e){return!e||!isNaN(e)||"UID must be numeric"}],gidRule:[function(e){return!e||!isNaN(e)||"GID must be numeric"}],modeRule:[function(e){return!e||!isNaN(e)||"Most must be numeric"}]}},beforeDestroy:function(){},mounted:function(){var e=l()(s.a.mark(function e(){var t,i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.a.defaults.headers.common.Authorization="Bearer "+this.loggedToken,this.$storage.isset("lxd")){e.next=15;break}return e.prev=2,e.next=5,h.a.get(this.loggedUser.sub+"/api/lxd");case 5:t=e.sent,this.$storage.set("lxd",t.data),this.lxd=t.data,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.$storage.remove("lxd");case 13:e.next=16;break;case 15:this.lxd=this.$storage.get("lxd");case 16:this.linkedItem=c()({},this.linked),this.$nextTick(function(){i.initialize()});case 18:case"end":return e.stop()}},e,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}(),watch:{dialog:function(e){e||this.close()}},methods:{initialize:function(){var e=l()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get(this.loggedUser.sub+"/api/lxd/devices/unixchar");case 3:t=e.sent,this.items=t.data.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.error="Could not fetch data from server.";case 10:this.tableLoading=!1;case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),attachItem:function(){var e=l()(s.a.mark(function e(t){var i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.linkedItem=c()({},f.outfix(this.linkedItem)),this.linkedItem.devices=c()({},this.linkedItem.devices),this.$set(this.linkedItem.devices,t.name,m()({type:t.type},t.dict)),e.next=5,h.a.patch(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{devices:this.linkedItem.devices});case 5:(i=e.sent).data.error&&(this.attachError=i.data.error);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),detachItem:function(){var e=l()(s.a.mark(function e(t){var i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.attachError=!1,this.$delete(this.linkedItem.devices,t.name),this.linkedItem=c()({},f.outfix(this.linkedItem)),e.next=5,h.a.put(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{config:this.linkedItem.config,devices:this.linkedItem.devices,ephemeral:this.linkedItem.ephemeral,stateful:this.linkedItem.stateful,profiles:this.linkedItem.profiles});case 5:(i=e.sent).data.error&&(this.attachError=i.data.error);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),editItem:function(e){this.editingIndex=this.items.indexOf(e),this.editingItem=JSON.parse(r()(e)),this.dialog=!0},saveItem:function(){var e=l()(s.a.mark(function e(){var t,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$refs.form.validate()){e.next=18;break}if(e.prev=1,t={id:this.editingItem.id,type:this.editingItem.type,name:this.editingItem.name,dict:{source:this.editingItem.dict.source,path:this.editingItem.dict.path,major:this.editingItem.dict.major,minor:this.editingItem.dict.minor,required:this.editingItem.dict.required,uid:this.editingItem.dict.uid,gid:this.editingItem.dict.gid,mode:this.editingItem.dict.mode}},!(this.editingIndex>-1)){e.next=9;break}return e.next=6,h.a.put(this.loggedUser.sub+"/api/lxd/devices/unixchar/"+this.editingItem.id,t);case 6:i=e.sent,e.next=12;break;case 9:return e.next=11,h.a.post(this.loggedUser.sub+"/api/lxd/devices/unixchar",t);case 11:i=e.sent;case 12:i.data.error?i.data.error.name&&(this.error=i.data.error.name):(this.$emit("snackbar","Device successfully saved."),-1===this.editingIndex&&this.close(),this.initialize()),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),this.error="Could not save device to server.";case 18:case"end":return e.stop()}},e,this,[[1,15]])}));return function(){return e.apply(this,arguments)}}(),deleteItem:function(){var e=l()(s.a.mark(function e(t){var i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$prompt.show({persistent:!0,width:400,toolbar:{color:"red darken-3",closable:!1},title:"Delete device?",text:"Are you sure you want to delete the <b>"+t.name+'</b> device?<p class="text-md-center red--text"><br><b>Devices are not removed from containers!</b></p>',buttons:[{title:"Yes",color:"success",handler:function(){var e=l()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.items.indexOf(t),i.items.splice(n,1),e.prev=2,e.next=5,h.a.delete(i.loggedUser.sub+"/api/lxd/devices/unixchar/"+t.id);case 5:e.sent,i.$emit("snackbar","Device successfully deleted."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i.error="Failed to delete device.";case 12:case"end":return e.stop()}},e,i,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{title:"No",color:"error"}]});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),openDialog:function(){this.dialog=!0},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editingItem=c()({},e.defaultItem),e.editingIndex=-1},300)},ucfirst:function(e){return String(e).charAt(0).toUpperCase()+String(e).slice(1)}}}},gwvS:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-alert",{attrs:{type:"error",value:e.attachError}},[e._v("\n    "+e._s(e.attachError)+"\n  ")]),i("v-data-table",{attrs:{headers:e.tableHeaders,items:e.items,"hide-actions":"",loading:e.tableLoading},scopedSlots:e._u([{key:"items",fn:function(t){return[i("tr",[i("td",[e.linkedItem.devices?i("span",[e._v(e._s(t.item.name))]):i("span",[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(i){i.stopPropagation(),e.editItem(t.item)}}},[e._v(e._s(t.item.name))])])]),i("td",[e._v(e._s(t.item.dict.listen?t.item.dict.listen.substring(t.item.dict.listen.indexOf(":")+1):"-"))]),i("td",[e._v(e._s(t.item.dict.connect?t.item.dict.connect.substring(t.item.dict.connect.indexOf(":")+1):"-"))]),i("td",[e._v(e._s(t.item.dict.bind?e.ucfirst(t.item.dict.bind):"-"))]),i("td",[e.linkedItem.devices?i("span",[e.linkedItem.devices[t.item.name]?e._e():i("v-btn",{attrs:{depressed:"",small:""},on:{click:function(i){e.attachItem(t.item)}}},[e._v("Attach")]),e.linkedItem.devices[t.item.name]?i("v-btn",{attrs:{dark:"",depressed:"",small:"",color:"red"},on:{click:function(i){e.detachItem(t.item)}}},[e._v("Detach")]):e._e()],1):i("v-tooltip",{attrs:{left:""}},[i("v-btn",{staticClass:"mx-0",staticStyle:{float:"right"},attrs:{slot:"activator",icon:""},on:{click:function(i){i.stopPropagation(),e.deleteItem(t.item)}},slot:"activator"},[i("v-icon",{attrs:{color:"pink"}},[e._v("delete")])],1),i("span",[e._v("Delete")])],1)],1)])]}}])},[i("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}),i("template",{slot:"no-data"},[e._v("\n      "+e._s(e.tableLoading?"Fetching data, please wait...":"There are currently no proxy devices.")+"\n    ")])],2),i("v-dialog",{attrs:{"max-width":"700px",scrollable:"","hide-overlay":null!==e.linkedItem},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto","min-height":"calc(100vh - 400px)"},attrs:{flat:""}},[i("v-toolbar",{attrs:{card:"",dark:"",color:"light-blue darken-3"}},[i("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.close()}}},[i("v-icon",[e._v("close")])],1),i("v-toolbar-title",[e._v(e._s(-1===e.editingIndex?"New":"Edit")+" Proxy Device")]),i("v-spacer"),i("v-toolbar-items",[i("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(t){e.saveItem()}}},[e._v("Save")])],1)],1),i("v-card-text",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-alert",{attrs:{type:"error",value:e.error}},[e._v("\n            "+e._s(e.error)+"\n          ")]),i("h3",[e._v("General")]),i("v-text-field",{attrs:{rules:e.nameRule,label:"Name:",placeholder:"",required:"",hint:"Enter a name for the proxy device."},model:{value:e.editingItem.name,callback:function(t){e.$set(e.editingItem,"name",t)},expression:"editingItem.name"}}),i("h3",[e._v("Device Settings")]),i("v-text-field",{attrs:{rules:e.listenRule,label:"Listen:",placeholder:"",required:"",hint:"The address and port to bind and listen."},model:{value:e.editingItem.dict.listen,callback:function(t){e.$set(e.editingItem.dict,"listen",t)},expression:"editingItem.dict['listen']"}}),i("v-text-field",{attrs:{rules:e.connectRule,label:"Connect:",placeholder:"",required:"",hint:"The address and port to connect to."},model:{value:e.editingItem.dict.connect,callback:function(t){e.$set(e.editingItem.dict,"connect",t)},expression:"editingItem.dict['connect']"}}),i("v-select",{attrs:{items:["host","container"],label:"Bind:","persistent-hint":"",hint:"Which side to bind on."},model:{value:e.editingItem.dict.bind,callback:function(t){e.$set(e.editingItem.dict,"bind",t)},expression:"editingItem.dict['bind']"}})],1)],1),i("div",{staticStyle:{flex:"1 1 auto"}})],1)],1)],1)};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},hBMt:function(e,t,i){"use strict";var n=i("yXsy"),r=i("bUSP"),a=!1;var s=function(e){a||i("Ylae")},o=i("VU/8")(n.a,r.a,!1,s,null,null);o.options.__file="components/lxd/devices/nic.vue",t.a=o.exports},"hr+4":function(e,t,i){"use strict";var n=i("ufm0"),r=i("fv6p"),a=!1;var s=function(e){a||i("t/2W")},o=i("VU/8")(n.a,r.a,!1,s,null,null);o.options.__file="components/lxd/devices/gpu.vue",t.a=o.exports},"iAs+":function(e,t,i){var n=i("fy18");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("638b3e4a",n,!1,{sourceMap:!1})},jdHK:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-alert",{attrs:{type:"error",value:e.attachError}},[e._v("\n    "+e._s(e.attachError)+"\n  ")]),i("v-data-table",{attrs:{headers:e.tableHeaders,items:e.items,"hide-actions":"",loading:e.tableLoading},scopedSlots:e._u([{key:"items",fn:function(t){return[i("tr",[i("td",[e.linkedItem.devices?i("span",[e._v(e._s(t.item.name))]):i("span",[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(i){i.stopPropagation(),e.editItem(t.item)}}},[e._v(e._s(t.item.name))])])]),i("td",[e._v(e._s(t.item.dict.source?t.item.dict.source:"-"))]),i("td",[e._v(e._s(t.item.dict.path?t.item.dict.path:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.major?t.item.dict.major:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.minor?t.item.dict.minor:"-"))]),i("td",[e._v(e._s(t.item.dict.required?"Yes":"No"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.uid?t.item.dict.uid:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.gid?t.item.dict.gid:"-"))]),e.linkedItem.devices?e._e():i("td",[e._v(e._s(t.item.dict.mode?t.item.dict.mode:"-"))]),i("td",[e.linkedItem.devices?i("span",[e.linkedItem.devices[t.item.name]?e._e():i("v-btn",{attrs:{depressed:"",small:""},on:{click:function(i){e.attachItem(t.item)}}},[e._v("Attach")]),e.linkedItem.devices[t.item.name]?i("v-btn",{attrs:{dark:"",depressed:"",small:"",color:"red"},on:{click:function(i){e.detachItem(t.item)}}},[e._v("Detach")]):e._e()],1):i("v-tooltip",{attrs:{left:""}},[i("v-btn",{staticClass:"mx-0",staticStyle:{float:"right"},attrs:{slot:"activator",icon:""},on:{click:function(i){i.stopPropagation(),e.deleteItem(t.item)}},slot:"activator"},[i("v-icon",{attrs:{color:"pink"}},[e._v("delete")])],1),i("span",[e._v("Delete")])],1)],1)])]}}])},[i("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}),i("template",{slot:"no-data"},[e._v("\n      "+e._s(e.tableLoading?"Fetching data, please wait...":"There are currently no unix block devices.")+"\n    ")])],2),i("v-dialog",{attrs:{"max-width":"700px",scrollable:"","hide-overlay":null!==e.linkedItem},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto","min-height":"calc(100vh - 400px)"},attrs:{flat:""}},[i("v-toolbar",{attrs:{card:"",dark:"",color:"light-blue darken-3"}},[i("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.close()}}},[i("v-icon",[e._v("close")])],1),i("v-toolbar-title",[e._v(e._s(-1===e.editingIndex?"New":"Edit")+" Unix Block Device")]),i("v-spacer"),i("v-toolbar-items",[i("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(t){e.saveItem()}}},[e._v("Save")])],1)],1),i("v-card-text",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-alert",{attrs:{type:"error",value:e.error}},[e._v("\n            "+e._s(e.error)+"\n          ")]),i("h3",[e._v("General")]),i("v-text-field",{attrs:{rules:e.nameRule,label:"Name:",placeholder:"",required:"",hint:"Enter a name for the character device."},model:{value:e.editingItem.name,callback:function(t){e.$set(e.editingItem,"name",t)},expression:"editingItem.name"}}),i("h3",[e._v("Device Settings")]),i("v-text-field",{attrs:{label:"Source:",placeholder:"",hint:"Path on the host. (one of 'source' and 'path' must be set)"},model:{value:e.editingItem.dict.source,callback:function(t){e.$set(e.editingItem.dict,"source",t)},expression:"editingItem.dict.source"}}),i("v-text-field",{attrs:{label:"Path:",placeholder:"",hint:"Path inside the container (one of 'source' and 'path' must be set)."},model:{value:e.editingItem.dict.path,callback:function(t){e.$set(e.editingItem.dict,"path",t)},expression:"editingItem.dict.path"}}),i("v-text-field",{attrs:{label:"Major Number:",placeholder:"",hint:"Device major number."},model:{value:e.editingItem.dict.major,callback:function(t){e.$set(e.editingItem.dict,"major",t)},expression:"editingItem.dict.major"}}),i("v-text-field",{attrs:{label:"Minor Number:",placeholder:"",hint:"Device minor number."},model:{value:e.editingItem.dict.minor,callback:function(t){e.$set(e.editingItem.dict,"minor",t)},expression:"editingItem.dict.minor"}}),i("v-text-field",{attrs:{label:"UID:",rules:e.uidRule,placeholder:"",hint:"UID of the device owner in the container."},model:{value:e.editingItem.dict.uid,callback:function(t){e.$set(e.editingItem.dict,"uid",t)},expression:"editingItem.dict.uid"}}),i("v-text-field",{attrs:{label:"GID:",rules:e.gidRule,placeholder:"",hint:"GID of the device owner in the container."},model:{value:e.editingItem.dict.gid,callback:function(t){e.$set(e.editingItem.dict,"gid",t)},expression:"editingItem.dict.gid"}}),i("v-text-field",{attrs:{label:"Mode:",rules:e.modeRule,placeholder:"",hint:"Mode of the device in the container."},model:{value:e.editingItem.dict.mode,callback:function(t){e.$set(e.editingItem.dict,"mode",t)},expression:"editingItem.dict.mode"}}),i("h4",[e._v("Required")]),i("v-switch",{attrs:{color:"success","persistent-hint":"",hint:"Whether or not this device is required to start the container."},model:{value:e.editingItem.dict.required,callback:function(t){e.$set(e.editingItem.dict,"required",t)},expression:"editingItem.dict.required"}})],1)],1),i("div",{staticStyle:{flex:"1 1 auto"}})],1)],1)],1)};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},l7Xd:function(e,t,i){var n=i("tDi5");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("4e1cd560",n,!1,{sourceMap:!1})},rO6o:function(e,t,i){"use strict";t.a={methods:{formatBytes:function(e,t){if(0===e)return"0 Bytes";var i=t||2,n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(i))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]},isIP4:function(e){return!!/^([0-9]{1,3}\.){3}[0-9]{1,3}(\/([0-9]|[1-2][0-9]|3[0-2]))?$/.test(e)},uniqueId:function(e){e||(e=8);for(var t="",i=1;i<e+1;i+=8)t+=Math.random().toString(36).substr(2,10);return t.substr(0,e)},UUID:function(){function e(){return Math.random().toString(16).slice(-4)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}}},"t/2W":function(e,t,i){var n=i("wLgX");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("e69182a8",n,!1,{sourceMap:!1})},tDi5:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"",""])},"tM/K":function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"",""])},ufm0:function(e,t,i){"use strict";var n=i("mvHQ"),r=i.n(n),a=i("Xxa5"),s=i.n(a),o=i("woOf"),c=i.n(o),d=i("exGp"),l=i.n(d),u=i("Dd8w"),m=i.n(u),v=i("NYxO"),p=i("mtWM"),h=i.n(p),f=i("Ee0Q");t.a={components:{},props:["linked"],computed:m()({},Object(v.mapGetters)({loggedUser:"auth/loggedUser",loggedToken:"auth/loggedToken"}),{tableHeaders:function(){return this.linked?[{text:"Name",value:"name"},{text:"Vendor ID",value:"vendorid"},{text:"Product ID",value:"productid"},{text:"Card ID",value:"id"},{text:"PCI",value:"pci"},{text:"Actions",value:"name",sortable:!1,align:"center",width:"100px"}]:[{text:"Name",value:"name"},{text:"Vendor ID",value:"vendorid"},{text:"Product ID",value:"productid"},{text:"Card ID",value:"id"},{text:"PCI",value:"pci"},{text:"UID",value:"uid"},{text:"GUI",value:"gid"},{text:"Mode",value:"mode"},{text:"Actions",value:"name",sortable:!1,align:"center",width:"100px"}]}}),data:function(){return{error:!1,attachError:!1,valid:!0,dialog:!1,tableLoading:!0,items:[],editingIndex:-1,editingItem:{id:-1,type:"gpu",name:"",dict:{vendorid:"",productid:"",id:"",pci:"",uid:"0",gid:"0",mode:"0660"}},defaultItem:{id:-1,type:"gpu",name:"",dict:{vendorid:"",productid:"",id:"",pci:"",uid:"0",gid:"0",mode:"0660"}},linkedItem:{},nameRule:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=100||"Name must be less than 100 characters"}],uidRule:[function(e){return!e||!isNaN(e)||"UID must be numeric"}],gidRule:[function(e){return!e||!isNaN(e)||"GID must be numeric"}],modeRule:[function(e){return!e||!isNaN(e)||"Most must be numeric"}]}},beforeDestroy:function(){},mounted:function(){var e=l()(s.a.mark(function e(){var t,i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.a.defaults.headers.common.Authorization="Bearer "+this.loggedToken,this.$storage.isset("lxd")){e.next=15;break}return e.prev=2,e.next=5,h.a.get(this.loggedUser.sub+"/api/lxd");case 5:t=e.sent,this.$storage.set("lxd",t.data),this.lxd=t.data,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.$storage.remove("lxd");case 13:e.next=16;break;case 15:this.lxd=this.$storage.get("lxd");case 16:this.linkedItem=c()({},this.linked),this.$nextTick(function(){i.initialize()});case 18:case"end":return e.stop()}},e,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}(),watch:{dialog:function(e){e||this.close()}},methods:{initialize:function(){var e=l()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get(this.loggedUser.sub+"/api/lxd/devices/gpu");case 3:t=e.sent,this.items=t.data.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.error="Could not fetch data from server.";case 10:this.tableLoading=!1;case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),attachItem:function(){var e=l()(s.a.mark(function e(t){var i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.linkedItem=c()({},f.outfix(this.linkedItem)),this.linkedItem.devices=c()({},this.linkedItem.devices),this.$set(this.linkedItem.devices,t.name,m()({type:t.type},t.dict)),e.next=5,h.a.patch(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{devices:this.linkedItem.devices});case 5:(i=e.sent).data.error&&(this.attachError=i.data.error);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),detachItem:function(){var e=l()(s.a.mark(function e(t){var i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.attachError=!1,this.$delete(this.linkedItem.devices,t.name),this.linkedItem=c()({},f.outfix(this.linkedItem)),e.next=5,h.a.put(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{config:this.linkedItem.config,devices:this.linkedItem.devices,ephemeral:this.linkedItem.ephemeral,stateful:this.linkedItem.stateful,profiles:this.linkedItem.profiles});case 5:(i=e.sent).data.error&&(this.attachError=i.data.error);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),editItem:function(e){this.editingIndex=this.items.indexOf(e),this.editingItem=JSON.parse(r()(e)),this.dialog=!0},saveItem:function(){var e=l()(s.a.mark(function e(){var t,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$refs.form.validate()){e.next=18;break}if(e.prev=1,t={id:this.editingItem.id,type:this.editingItem.type,name:this.editingItem.name,dict:{vendorid:this.editingItem.dict.vendorid,productid:this.editingItem.dict.productid,id:this.editingItem.dict.id,pci:this.editingItem.dict.pci,uid:this.editingItem.dict.uid,gid:this.editingItem.dict.gid,mode:this.editingItem.dict.mode}},!(this.editingIndex>-1)){e.next=9;break}return e.next=6,h.a.put(this.loggedUser.sub+"/api/lxd/devices/gpu/"+this.editingItem.id,t);case 6:i=e.sent,e.next=12;break;case 9:return e.next=11,h.a.post(this.loggedUser.sub+"/api/lxd/devices/gpu",t);case 11:i=e.sent;case 12:i.data.error?i.data.error.name&&(this.error=i.data.error.name):(this.$emit("snackbar","Device successfully saved."),-1===this.editingIndex&&this.close(),this.initialize()),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),this.error="Could not save device to server.";case 18:case"end":return e.stop()}},e,this,[[1,15]])}));return function(){return e.apply(this,arguments)}}(),deleteItem:function(){var e=l()(s.a.mark(function e(t){var i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$prompt.show({persistent:!0,width:400,toolbar:{color:"red darken-3",closable:!1},title:"Delete device?",text:"Are you sure you want to delete the <b>"+t.name+'</b> device?<p class="text-md-center red--text"><br><b>Devices are not removed from containers!</b></p>',buttons:[{title:"Yes",color:"success",handler:function(){var e=l()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.items.indexOf(t),i.items.splice(n,1),e.prev=2,e.next=5,h.a.delete(i.loggedUser.sub+"/api/lxd/devices/gpu/"+t.id);case 5:e.sent,i.$emit("snackbar","Device successfully deleted."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i.error="Failed to delete device.";case 12:case"end":return e.stop()}},e,i,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{title:"No",color:"error"}]});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),openDialog:function(){this.dialog=!0},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editingItem=c()({},e.defaultItem),e.editingIndex=-1},300)},ucfirst:function(e){return String(e).charAt(0).toUpperCase()+String(e).slice(1)}}}},wLgX:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"",""])},waaV:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"",""])},xNzE:function(e,t,i){"use strict";var n=i("C3xt"),r=i("NDgE"),a=!1;var s=function(e){a||i("4KYn")},o=i("VU/8")(n.a,r.a,!1,s,null,null);o.options.__file="components/lxd/devices/disk.vue",t.a=o.exports},yXsy:function(e,t,i){"use strict";var n=i("mvHQ"),r=i.n(n),a=i("Xxa5"),s=i.n(a),o=i("woOf"),c=i.n(o),d=i("exGp"),l=i.n(d),u=i("Dd8w"),m=i.n(u),v=i("NYxO"),p=i("mtWM"),h=i.n(p),f=i("Ee0Q");t.a={components:{},props:["linked"],computed:m()({},Object(v.mapGetters)({loggedUser:"auth/loggedUser",loggedToken:"auth/loggedToken"}),{tableHeaders:function(){return this.linked,[{text:"Name",value:"name"},{text:"Type",value:"nictype"},{text:"Parent",value:"parent"},{text:"Actions",value:"name",sortable:!1,align:"center",width:"100px"}]}}),data:function(){return{error:"",valid:!0,dialog:!1,tableLoading:!0,networks:[],items:[],editingIndex:-1,editingItem:{id:-1,type:"nic",name:"",dict:{nictype:"bridged","limits.ingress":"","limits.egress":"","limits.max":"",name:"",host_name:"",hwaddr:"",mtu:"",vlan:"","ipv4.address":"","ipv6.address":"","security.mac_filtering":"","maas.subnet.ipv4":"","maas.subnet.ipv6":"",parent:"lxdbr0"}},defaultItem:{id:-1,type:"nic",name:"",dict:{nictype:"bridged","limits.ingress":"","limits.egress":"","limits.max":"",name:"",host_name:"",hwaddr:"",mtu:"",vlan:"","ipv4.address":"","ipv6.address":"","security.mac_filtering":"","maas.subnet.ipv4":"","maas.subnet.ipv6":"",parent:"lxdbr0"}},linkedItem:{},nameRule:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=100||"Name must be less than 100 characters"}],mtuRule:[function(e){return!e||!isNaN(e)||"MTU must be numeric"}],macRule:[function(e){return!e||/^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/.test(e)||"Invalid MAC address"}],ip4Rule:[function(e){return!e||/^(?!0)(?!\.)((^|\.)([1-9]?\d|1\d\d|2(5[0-5]|[0-4]\d))){4}$/gm.test(e)||"Invalid IPv4 address"}],ip6Rule:[function(e){return!e||/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(e)||"Invalid IPv6 address"}]}},beforeDestroy:function(){},mounted:function(){var e=l()(s.a.mark(function e(){var t,i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.a.defaults.headers.common.Authorization="Bearer "+this.loggedToken,this.$storage.isset("lxd")){e.next=15;break}return e.prev=2,e.next=5,h.a.get(this.loggedUser.sub+"/api/lxd");case 5:t=e.sent,this.$storage.set("lxd",t.data),this.lxd=t.data,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.$storage.remove("lxd");case 13:e.next=16;break;case 15:this.lxd=this.$storage.get("lxd");case 16:this.linkedItem=c()({},this.linked),this.$nextTick(function(){i.initialize()});case 18:case"end":return e.stop()}},e,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}(),watch:{dialog:function(e){e||this.close()}},methods:{initialize:function(){var e=l()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get(this.loggedUser.sub+"/api/lxd/devices/nic");case 3:t=e.sent,this.items=t.data.data,this.linked||this.getNetworks(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.error="Could not fetch data from server.";case 11:this.tableLoading=!1;case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),attachItem:function(){var e=l()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.linkedItem.devices=c()({},this.linkedItem.devices),this.$set(this.linkedItem.devices,t.name,m()({type:t.type},t.dict)),e.next=4,h.a.patch(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{devices:this.linkedItem.devices});case 4:e.sent;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),detachItem:function(){var e=l()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$delete(this.linkedItem.devices,t.name),this.linkedItem=c()({},f.outfix(this.linkedItem)),e.next=4,h.a.put(this.loggedUser.sub+"/api/lxd/containers/"+this.linkedItem.name,{config:this.linkedItem.config,devices:this.linkedItem.devices,ephemeral:this.linkedItem.ephemeral,stateful:this.linkedItem.stateful,profiles:this.linkedItem.profiles});case 4:e.sent;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getNetworks:function(){var e=l()(s.a.mark(function e(){var t,i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loggedUser||this.$router.replace("/servers"),e.next=4,h.a.get(this.loggedUser.sub+"/api/lxd/networks");case 4:t=e.sent,this.networks=[],t.data.data.forEach(function(e){e.managed&&i.networks.push(e.name)}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.networks=[];case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),editItem:function(e){this.editingIndex=this.items.indexOf(e),this.editingItem=JSON.parse(r()(e)),this.editingItem.name=this.editingItem.dict.name,this.dialog=!0},saveItem:function(){var e=l()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$refs.form.validate()){e.next=18;break}if(this.editingItem.name=this.editingItem.dict.name,e.prev=2,!(this.editingIndex>-1)){e.next=9;break}return e.next=6,h.a.put(this.loggedUser.sub+"/api/lxd/devices/nic/"+this.editingItem.id,this.editingItem);case 6:t=e.sent,e.next=12;break;case 9:return e.next=11,h.a.post(this.loggedUser.sub+"/api/lxd/devices/nic",this.editingItem);case 11:t=e.sent;case 12:t.data.error?(t.data.error.name&&(this.error=t.data.error.name),t.data.error.parent&&(this.error=t.data.error.parent)):(this.$emit("snackbar","Device successfully saved."),this.editingIndex>-1?c()(this.items[this.editingIndex],this.editingItem):this.items.push(c()({},this.editingItem)),-1===this.editingIndex&&this.close(),this.initialize()),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),this.error="Could not save device to server.";case 18:case"end":return e.stop()}},e,this,[[2,15]])}));return function(){return e.apply(this,arguments)}}(),deleteItem:function(){var e=l()(s.a.mark(function e(t){var i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$prompt.show({persistent:!0,width:400,toolbar:{color:"red darken-3",closable:!1},title:"Delete device?",text:"Are you sure you want to delete the <b>"+t.name+'</b> device?<p class="text-md-center red--text"><br><b>Devices are not removed from containers!</b></p>',buttons:[{title:"Yes",color:"success",handler:function(){var e=l()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.items.indexOf(t),i.items.splice(n,1),e.prev=2,e.next=5,h.a.delete(i.loggedUser.sub+"/api/lxd/devices/nic/"+t.id);case 5:e.sent,i.$emit("snackbar","Device successfully deleted."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i.error="Failed to delete device.";case 12:case"end":return e.stop()}},e,i,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{title:"No",color:"error"}]});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),openDialog:function(){this.dialog=!0},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editingItem=c()({},e.defaultItem),e.editingIndex=-1},300)},ucfirst:function(e){return String(e).charAt(0).toUpperCase()+String(e).slice(1)}}}}});